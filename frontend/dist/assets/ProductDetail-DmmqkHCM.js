import{J as _,c as L,b as $,d as D,e as I,r,j as e,L as U,K as B,k as K,P as x,M,N as W,F as q,g as Q,O as V,Q as z,f as v}from"./index-D_Xgmlfr.js";import{I as G,P as H}from"./ProductCard-CN9SApQ0.js";import{B as m}from"./Breadcrumb-Ban2MFAd.js";/* empty css                   */function ae(){const{slug:g}=_(),i=L(),{user:p}=$(),{addToCart:y}=D(),{addToWishlist:N,removeFromWishlist:k,isInWishlist:c}=I(),[s,w]=r.useState(null),[u,S]=r.useState([]),[o,C]=r.useState(0),[J,d]=r.useState(!1),[n,P]=r.useState(1),[l,T]=r.useState("description"),[O,h]=r.useState(!0),[Y,b]=r.useState(null);r.useEffect(()=>{(async()=>{try{h(!0),b(null);const a=await v(`/api/products/slug/${g}`);if(a.product){w(a.product);const F=((await v(`/api/products?category=${encodeURIComponent(a.product.category)}&limit=5`)).products||[]).filter(R=>R.id!==a.product.id).slice(0,4);S(F)}else i("/products")}catch(a){console.error("Error fetching product:",a),b("Product not found"),i("/products")}finally{h(!1)}})()},[g,i]),r.useEffect(()=>{if(!s)return;const t=s.gallery?.[o]||s.image;d(!1);const a=new Image;return a.src=t,a.onload=()=>d(!0),a.onerror=()=>d(!1),()=>{a.onload=null,a.onerror=null}},[s,o]);const E=()=>{s&&(s.inStock||s.in_stock||s.stock>0)&&y(s,n)},A=()=>{s&&(c(s.id)?k(s.id):N(s))},f=t=>{P(a=>Math.max(1,Math.min(s.stock,a+t)))};return O?e.jsx("div",{className:"min-h-0 bg-gradient-to-br from-blue-50 to-orange-50 overflow-x-hidden",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-16",children:[e.jsx(m,{}),e.jsxs("div",{className:"text-center mt-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-24 w-24 border-b-4 border-orange-500 mx-auto mb-6"}),e.jsx("p",{className:"text-gray-600 font-saiyan text-xl",children:"Loading product..."})]})]})}):s?e.jsx("div",{className:"min-h-0 bg-gradient-to-br from-blue-50 to-orange-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx(m,{}),e.jsxs("button",{onClick:()=>i(-1),className:"flex items-center space-x-2 text-blue-600 hover:text-orange-600 transition-colors mb-6 font-saiyan","aria-label":"Back to products",children:[e.jsx(B,{}),e.jsx("span",{children:"BACK TO PRODUCTS"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[s&&e.jsx(G,{src:s.gallery?.[o]||s.image,alt:s.name,className:"aspect-square shadow-xl",overlayText:s.name}),!(s.inStock||s.in_stock||s.stock>0)&&e.jsx("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-4 py-2 rounded-full font-bold shadow-lg",children:"OUT OF STOCK"}),(s.featured||s.is_featured)&&e.jsx("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-orange-400 to-orange-600 text-white px-4 py-2 rounded-full font-bold kamehameha-glow",children:"LEGENDARY ITEM"})]}),s.gallery&&s.gallery.length>1&&e.jsx("div",{className:"flex space-x-2 overflow-x-auto","aria-label":"Product gallery thumbnails",children:s.gallery.map((t,a)=>e.jsx("button",{onClick:()=>C(a),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${o===a?"border-orange-500 scale-105":"border-gray-200 hover:border-blue-400"}`,"aria-label":`View image ${a+1}`,children:e.jsx("img",{src:t,alt:`${s.name} view ${a+1}`,className:"w-full h-full object-cover",onError:j=>{j.target.src="/api/placeholder/80/80"}})},a))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("span",{className:"inline-block bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm font-semibold",children:s.category})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-800 font-saiyan",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"text-yellow-400 text-xl"}),e.jsxs("span",{className:"text-lg text-gray-700",children:["Power Level: ",e.jsx("span",{className:"font-bold text-orange-600",children:Number(s.powerLevel||s.power_level||0).toLocaleString()})]})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((t,a)=>e.jsx("span",{className:"bg-orange-100 text-orange-600 px-3 py-1 rounded-full text-sm font-medium",children:t},a))}),e.jsxs("div",{className:"flex items-center space-x-4",children:[(s.originalPrice||s.original_price)&&e.jsx("span",{className:"text-2xl text-gray-400 line-through",children:e.jsx(x,{value:s.originalPrice||s.original_price})}),e.jsx("span",{className:"text-4xl font-bold text-orange-600 font-saiyan",children:e.jsx(x,{value:s.price})}),(s.originalPrice||s.original_price)&&e.jsxs("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:["SAVE ",e.jsx(x,{value:parseFloat(s.originalPrice||s.original_price)-parseFloat(s.price)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.inStock||s.in_stock||s.stock>0?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:`font-medium ${s.inStock||s.in_stock||s.stock>0?"text-green-600":"text-red-600"}`,children:s.inStock||s.in_stock||s.stock>0?s.stock<=5?`Only ${s.stock} left in stock!`:"In Stock":"Out of Stock"})]}),(s.inStock||s.in_stock||s.stock>0)&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-lg font-medium text-gray-700",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center border-2 border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>f(-1),disabled:n<=1,className:"p-2 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Decrease quantity",children:e.jsx(M,{})}),e.jsx("span",{className:"px-4 py-2 min-w-[3rem] text-center font-bold","aria-live":"polite",children:n}),e.jsx("button",{onClick:()=>f(1),disabled:n>=s.stock,className:"p-2 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Increase quantity",children:e.jsx(W,{})})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{onClick:E,disabled:!(s.inStock||s.in_stock||s.stock>0),className:`flex-1 flex items-center justify-center px-8 py-4 rounded-xl font-saiyan font-bold text-lg transition-all ${s.inStock||s.in_stock||s.stock>0?"bg-gradient-to-r from-orange-400 to-orange-600 text-white kamehameha-glow hover:scale-105 hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,"aria-label":s.inStock||s.in_stock||s.stock>0?"Add to cart":"Out of stock",children:[e.jsx(q,{className:"mr-3"}),s.inStock||s.in_stock||s.stock>0?"ADD TO CAPSULE":"OUT OF STOCK"]}),e.jsx("button",{onClick:A,className:`px-6 py-4 rounded-xl border-2 transition-all ${c(s.id)?"bg-red-500 text-white border-red-500":"bg-white text-gray-700 border-gray-300 hover:border-red-500 hover:text-red-500"} ${p?"":"opacity-50 cursor-not-allowed"}`,disabled:!p,"aria-label":c(s.id)?"Remove from wishlist":"Add to wishlist",children:e.jsx(Q,{className:"text-xl"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx(V,{}),e.jsx("span",{className:"text-sm",children:"Battle Tested"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[e.jsx(z,{}),e.jsx("span",{className:"text-sm",children:"Energy Efficient"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-12",children:[e.jsx("div",{className:"border-b",children:e.jsx("nav",{className:"flex","aria-label":"Product details tabs",children:[{id:"description",label:"Description"},{id:"specifications",label:"Specifications"},{id:"reviews",label:"Reviews"}].map(t=>e.jsx("button",{onClick:()=>T(t.id),className:`px-8 py-4 font-saiyan font-bold transition-colors ${l===t.id?"bg-gradient-to-r from-orange-400 to-orange-600 text-white":"text-gray-600 hover:text-orange-600"}`,"aria-selected":l===t.id,"aria-controls":`tab-panel-${t.id}`,role:"tab",children:t.label},t.id))})}),e.jsxs("div",{className:"p-8",children:[l==="description"&&e.jsx("div",{className:"prose max-w-none",id:"tab-panel-description",role:"tabpanel",children:e.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:s.description})}),l==="specifications"&&s.specifications&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",id:"tab-panel-specifications",role:"tabpanel",children:Object.entries(s.specifications).map(([t,a])=>e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-200",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[t,":"]}),e.jsx("span",{className:"font-bold text-orange-600",children:a})]},t))}),l==="reviews"&&e.jsx("div",{className:"text-center py-12",id:"tab-panel-reviews",role:"tabpanel",children:e.jsx("p",{className:"text-gray-600 text-lg",children:"Reviews coming soon! Battle-test this item and share your experience."})})]})]}),u.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 font-saiyan mb-8",children:"RELATED CAPSULES"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map(t=>e.jsx(H,{product:t,size:"medium"},t.id))})]})]})}):e.jsx("div",{className:"min-h-0 bg-gradient-to-br from-blue-50 to-orange-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-16",children:[e.jsx(m,{}),e.jsxs("div",{className:"text-center mt-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4 font-saiyan",children:"PRODUCT NOT FOUND"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"The product you're looking for doesn't exist in our capsule inventory."}),e.jsx(U,{to:"/products",className:"inline-block bg-gradient-to-r from-orange-400 to-orange-600 text-white px-8 py-3 rounded-xl font-saiyan font-bold kamehameha-glow transition-all hover:scale-105",children:"BACK TO PRODUCTS"})]})]})})}export{ae as default};
