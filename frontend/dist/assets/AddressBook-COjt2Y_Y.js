import{j as e,b as S,o as B,r as l,f as m,N as T,X as F,as as O,al as R,a0 as z,ad as I}from"./index-87IgoN6I.js";function P({isOpen:h,message:f="Are you sure?",onConfirm:j,onCancel:n}){return h?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Confirmation"}),e.jsx("p",{className:"text-sm text-gray-700 mb-4",children:f}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Yes, delete"})]})]})}):null}const U=()=>{const h=t=>{p(t),x({type:t.type||"home",name:t.name||"",fullName:t.fullName||"",street:t.street||"",city:t.city||"",state:t.state||"",zip:t.zip||"",phone:t.phone||""}),d(!0)},f=()=>{if(!s.fullName||!s.street||!s.city){o("âŒ Please fill in all required fields");return}(async()=>{try{const t=await m(`/api/addresses/${c.id}`,{method:"PUT",body:JSON.stringify(s)});i(a=>a.map(u=>u.id===c.id?t.address:u)),d(!1),p(null),x({type:"home",name:"",fullName:"",street:"",city:"",state:"",zip:"",phone:""}),n("âœ… Address updated!")}catch{o("âŒ Could not update address")}})()},{user:j}=S(),{showSuccess:n,showError:o}=B(),[N,i]=l.useState([]),[L,C]=l.useState(!0),[v,d]=l.useState(!1),[c,p]=l.useState(null),[s,x]=l.useState({type:"home",name:"",fullName:"",street:"",city:"",state:"",zip:"",phone:""}),r=t=>{x({...s,[t.target.name]:t.target.value})},A=()=>{if(!s.fullName||!s.street||!s.city){o("âŒ Please fill in all required fields");return}(async()=>{try{const t=await m("/api/addresses",{method:"POST",body:JSON.stringify(s)});i(a=>[t.address,...a]),d(!1),x({type:"home",name:"",fullName:"",street:"",city:"",state:"",zip:"",phone:""}),n("âœ… Address added successfully!")}catch{o("âŒ Could not add address")}})()},w=t=>{b(t),y(!0)},[k,y]=l.useState(!1),[g,b]=l.useState(null),D=async()=>{if(g)try{await m(`/api/addresses/${g}`,{method:"DELETE"}),i(t=>t.filter(a=>a.id!==g)),n("ðŸ—‘ï¸ Address deleted")}catch{o("âŒ Could not delete address")}finally{y(!1),b(null)}},E=t=>{(async()=>{try{i(a=>a.map(u=>({...u,isDefault:u.id===t}))),n("âœ… Default address updated")}catch{o("âŒ Could not set default")}})()};return l.useEffect(()=>{let t=!0;return(async()=>{try{const a=await m("/api/addresses");t&&i(a.addresses||[])}catch{}finally{t&&C(!1)}})(),()=>{t=!1}},[]),e.jsx("div",{className:"min-h-0 bg-gradient-to-br from-blue-50 via-white to-orange-50 py-8 overflow-x-hidden dark:from-slate-900 dark:via-slate-800 dark:to-slate-700",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#3B4CCA] to-blue-600 rounded-2xl p-8 mb-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold font-saiyan mb-2",children:"ADDRESS BOOK"}),e.jsx("p",{className:"text-blue-100",children:"Manage your delivery addresses"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-white text-[#3B4CCA] px-6 py-3 rounded-lg font-saiyan font-bold hover:bg-gray-100 transition-all flex items-center space-x-2 dark:bg-slate-700 dark:text-white",children:[e.jsx(T,{}),e.jsx("span",{children:"ADD ADDRESS"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:N.map(t=>e.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 border-2 transition-all hover:shadow-xl ${t.isDefault?"border-[#3B4CCA]":"border-gray-200"} dark:bg-slate-800 dark:border-slate-700`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[t.type==="home"?e.jsx(F,{className:"text-[#3B4CCA] dark:text-white"}):e.jsx(O,{className:"text-[#3B4CCA] dark:text-white"}),e.jsx("span",{className:"font-saiyan text-[#3B4CCA] dark:text-white font-bold",children:t.name||(t.type||"").toUpperCase()})]}),t.isDefault&&e.jsx("span",{className:"bg-green-100 text-green-700 text-xs font-bold px-3 py-1 rounded-full",children:"DEFAULT"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("p",{className:"font-bold text-gray-800 dark:text-white",children:t.fullName}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t.street}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[t.city,", ",t.state," ",t.zip]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t.phone})]}),e.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>h(t),className:"bg-yellow-50 text-yellow-700 py-2 px-4 rounded-lg hover:bg-yellow-100 transition-all flex items-center",children:[e.jsx(R,{className:"mr-1"})," EDIT"]}),!t.isDefault&&e.jsx("button",{onClick:()=>E(t.id),className:"flex-1 bg-blue-50 text-[#3B4CCA] py-2 px-4 rounded-lg hover:bg-blue-100 transition-all font-saiyan text-sm dark:bg-slate-700 dark:text-white",children:"SET DEFAULT"}),e.jsx("button",{onClick:()=>w(t.id),className:"bg-red-50 text-red-600 py-2 px-4 rounded-lg hover:bg-red-100 transition-all",children:e.jsx(z,{})})]})]},t.id))}),N.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center dark:bg-slate-800",children:[e.jsx(I,{className:"text-6xl text-gray-300 mx-auto mb-4 dark:text-gray-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 font-saiyan dark:text-white",children:"No Addresses Yet"}),e.jsx("p",{className:"text-gray-600 mb-6 dark:text-gray-300",children:"Add your first delivery address to get started"}),e.jsx("button",{onClick:()=>d(!0),className:"bg-gradient-to-r from-[#3B4CCA] to-blue-600 text-white px-6 py-3 rounded-lg font-saiyan font-bold hover:shadow-lg transition-all",children:"ADD YOUR FIRST ADDRESS"})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 sm:p-2",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 sm:p-4 max-w-2xl w-full max-h-[90vh] overflow-y-auto dark:bg-slate-800",children:[e.jsx("h3",{className:"text-2xl sm:text-xl font-bold text-gray-800 font-saiyan mb-6 dark:text-white",children:c?"EDIT ADDRESS":"ADD NEW ADDRESS"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"ADDRESS TYPE"}),e.jsxs("select",{name:"type",value:s.type,onChange:r,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none",children:[e.jsx("option",{value:"home",children:"Home"}),e.jsx("option",{value:"work",children:"Work"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"FULL NAME *"}),e.jsx("input",{type:"text",name:"fullName",value:s.fullName,onChange:r,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"STREET ADDRESS *"}),e.jsx("input",{type:"text",name:"street",value:s.street,onChange:r,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"CITY *"}),e.jsx("input",{type:"text",name:"city",value:s.city,onChange:r,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"STATE"}),e.jsx("input",{type:"text",name:"state",value:s.state,onChange:r,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"ZIP CODE"}),e.jsx("input",{type:"text",name:"zip",value:s.zip,onChange:r,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"PHONE"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:r,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 sm:flex-col sm:space-y-2 sm:space-x-0",children:[e.jsx("button",{onClick:()=>{d(!1),p(null),x({type:"home",name:"",fullName:"",street:"",city:"",state:"",zip:"",phone:""})},className:"flex-1 bg-gray-300 text-gray-700 py-3 px-4 rounded-lg font-saiyan font-bold hover:bg-gray-400 transition-colors",children:"CANCEL"}),e.jsx("button",{onClick:c?f:A,className:"flex-1 bg-gradient-to-r from-[#3B4CCA] to-blue-600 text-white py-3 px-4 rounded-lg font-saiyan font-bold hover:shadow-lg transition-all",children:c?"SAVE CHANGES":"ADD ADDRESS"})]})]})]})}),e.jsx(P,{isOpen:k,message:"Are you sure you want to delete this address?",onConfirm:D,onCancel:()=>{y(!1),b(null)}})]})})};export{U as default};
