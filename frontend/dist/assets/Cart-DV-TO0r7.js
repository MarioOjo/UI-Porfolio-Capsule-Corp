import{m as M,l as Y,u as z,o as H,r as n,j as e,aa as K,$ as Q,g as V,L as u,ab as R,a1 as P,a2 as T,P as i,ac as A,f as W,a7 as X,s as Z,y as _,Z as J,ad as L}from"./index-C_rhaFlX.js";import{B as ee}from"./Breadcrumb-BB42uieg.js";const se=({item:r,size:b=160,className:c=""})=>{const[p,j]=n.useState(!1),[f,x]=n.useState("");n.useState(()=>{r?.image&&x(J(r,b))});const y=()=>{!p&&r?.image?(x(r.image),j(!0)):x("")};return!f||p?e.jsx("div",{className:`${c} bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold rounded-xl`,children:r?.name?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"text-sm mr-1"}),e.jsx("span",{className:"text-xs",children:r.name.charAt(0)})]}):e.jsx(L,{className:"text-sm"})}):e.jsx("img",{src:f,alt:r?.name||"Product image",className:c,onError:y,loading:"lazy"})};function ae(){const{cartItems:r,updateQuantity:b,removeFromCart:c,getCartTotal:p,clearCart:j,getCartStats:f,loading:x,validateCart:y}=M(),{user:v,authInitialized:I}=Y(),{isDarkMode:t}=z(),N=H(),[m,w]=n.useState(null),[o,k]=n.useState(null),a={background:t?"bg-gradient-to-br from-slate-900 to-slate-800":"bg-gradient-to-br from-blue-50 to-orange-50",card:t?"bg-slate-800 border border-slate-700":"bg-white border border-blue-100",text:{primary:t?"text-white":"text-gray-800",secondary:t?"text-gray-300":"text-gray-600",muted:t?"text-gray-400":"text-gray-500"},button:{primary:t?"bg-gradient-to-r from-orange-500 to-orange-700 text-white hover:from-orange-600 hover:to-orange-800":"bg-gradient-to-r from-orange-400 to-orange-600 text-white hover:from-orange-500 hover:to-orange-700",secondary:t?"bg-slate-700 text-gray-300 hover:bg-slate-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}},O=f(),{total:h,hasFreeShipping:g,freeShippingRemaining:U,freeShippingProgress:C}=O,$=g?0:25.99,S=h*.08,q=h+$+S,E=n.useCallback(async(s,l)=>{w(s);try{await c(s)}finally{w(null)}},[c]),d=n.useCallback(async(s,l)=>{k(s);try{await b(s,l)}finally{k(null)}},[b]),B=n.useCallback(async()=>{window.confirm("Are you sure you want to clear your entire cart?")&&await j()},[j]),D=()=>{if(!v){N("/auth");return}N("/checkout")},G=n.useCallback(()=>{y()},[y]),F=[1,2,3,5,10];return!I||x?e.jsx("div",{className:`min-h-screen flex items-center justify-center ${a.background}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:`text-lg ${a.text.primary}`,children:"Loading your capsule collection..."})]})}):e.jsx("div",{className:`min-h-0 ${a.background} overflow-x-hidden`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:py-8",children:[e.jsx(ee,{}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 sm:mb-8 gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:`text-2xl sm:text-3xl lg:text-4xl font-bold font-saiyan ${a.text.primary}`,children:"CAPSULE CART"}),e.jsxs("p",{className:`text-sm sm:text-base mt-2 ${a.text.secondary}`,children:[r.length," ",r.length===1?"item":"items"," in your capsule collection",h>0&&` ‚Ä¢ ${p().toLocaleString("en-US",{style:"currency",currency:"USD"})} total`]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r.length>0&&e.jsxs("button",{onClick:G,className:`flex items-center space-x-2 px-3 py-2 rounded-lg text-sm transition-colors ${t?"bg-slate-700 text-gray-300 hover:bg-slate-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Validate cart items",children:[e.jsx(K,{className:"text-xs"}),e.jsx("span",{children:"Validate"})]}),e.jsxs("button",{onClick:()=>N(-1),className:`flex items-center space-x-2 transition-colors font-saiyan text-sm sm:text-base px-4 py-2 rounded-lg ${t?"bg-slate-700 text-blue-400 hover:text-orange-400 hover:bg-slate-600":"bg-white text-blue-600 hover:text-orange-600 border border-gray-300"}`,children:[e.jsx(Q,{}),e.jsx("span",{className:"hidden sm:inline",children:"CONTINUE SHOPPING"}),e.jsx("span",{className:"sm:hidden",children:"BACK"})]})]})]}),r.length===0?e.jsxs("div",{className:`rounded-2xl shadow-lg p-8 sm:p-12 text-center ${a.card}`,children:[e.jsx(V,{className:`text-4xl sm:text-6xl mx-auto mb-4 sm:mb-6 ${t?"text-gray-600":"text-gray-300"}`}),e.jsx("h2",{className:`text-xl sm:text-2xl font-bold mb-3 sm:mb-4 font-saiyan ${a.text.primary}`,children:"YOUR CART IS EMPTY"}),e.jsx("p",{className:`mb-6 sm:mb-8 max-w-md mx-auto ${a.text.secondary}`,children:"Ready to power up? Your capsule collection awaits legendary gear and battle equipment!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(u,{to:"/products",className:"inline-block bg-gradient-to-r from-orange-400 to-orange-600 text-white px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-saiyan font-bold kamehameha-glow transition-all hover:scale-105 hover:shadow-xl text-sm sm:text-base",children:"EXPLORE CAPSULES"}),e.jsx(u,{to:"/products?category=Battle+Gear",className:`inline-block px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-saiyan font-bold transition-all hover:scale-105 border-2 text-sm sm:text-base ${t?"border-orange-500 text-orange-400 hover:bg-orange-500 hover:text-white":"border-orange-400 text-orange-600 hover:bg-orange-400 hover:text-white"}`,children:"BATTLE GEAR"})]})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[r.map(s=>e.jsx("div",{className:`rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 ${a.card} ${m===s.id?"opacity-50":""}`,children:e.jsx("div",{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-xl flex-shrink-0 overflow-hidden",children:e.jsx(se,{item:s,size:160,className:"w-full h-full object-cover rounded-xl"})}),e.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx(u,{to:`/product/${s.slug||s.id}`,className:`text-base sm:text-lg font-bold hover:text-orange-600 transition-colors font-saiyan line-clamp-2 flex-1 ${t?"text-white hover:text-orange-400":"text-gray-800 hover:text-orange-600"}`,children:s.name}),e.jsx("button",{onClick:()=>E(s.id,s.name),disabled:m===s.id,className:"text-red-500 hover:text-red-700 transition-colors p-1 sm:hidden flex-shrink-0 disabled:opacity-50","aria-label":`Remove ${s.name} from cart`,children:m===s.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-500"}):e.jsx(R,{className:"text-sm"})})]}),e.jsx("p",{className:`text-xs sm:text-sm mt-1 ${a.text.secondary}`,children:s.category}),s.powerLevel&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("span",{className:`text-xs sm:text-sm ${a.text.muted}`,children:"Power Level: "}),e.jsx("span",{className:"text-xs sm:text-sm font-bold text-orange-600 dark:text-orange-400 ml-1",children:Number(s.powerLevel||s.power_level||0).toLocaleString()})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2 sm:hidden",children:F.map(l=>e.jsx("button",{onClick:()=>d(s.id,l),className:`px-2 py-1 text-xs rounded-lg transition-colors ${s.quantity===l?"bg-orange-500 text-white":t?"bg-slate-700 text-gray-300 hover:bg-slate-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:l},l))}),e.jsxs("div",{className:"flex items-center justify-between mt-3 sm:hidden",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>d(s.id,s.quantity-1),disabled:s.quantity<=1||o===s.id,className:`w-7 h-7 rounded-full flex items-center justify-center transition-colors disabled:opacity-50 ${t?"bg-slate-700 hover:bg-slate-600":"bg-gray-200 hover:bg-orange-200"}`,children:o===s.id?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current"}):e.jsx(P,{className:"text-xs"})}),e.jsx("span",{className:"w-6 text-center font-bold text-sm",children:s.quantity}),e.jsx("button",{onClick:()=>d(s.id,s.quantity+1),disabled:o===s.id,className:`w-7 h-7 rounded-full flex items-center justify-center transition-colors disabled:opacity-50 ${t?"bg-slate-700 hover:bg-slate-600":"bg-gray-200 hover:bg-orange-200"}`,children:o===s.id?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current"}):e.jsx(T,{className:"text-xs"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-orange-600 dark:text-orange-400 font-saiyan",children:e.jsx(i,{value:parseFloat(s.price)*s.quantity})}),e.jsxs("div",{className:`text-xs ${a.text.muted}`,children:[e.jsx(i,{value:parseFloat(s.price)})," each"]})]})]})]}),e.jsx("div",{className:"hidden sm:flex items-center space-x-3",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>d(s.id,s.quantity-1),disabled:s.quantity<=1||o===s.id,className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors disabled:opacity-50 ${t?"bg-slate-700 hover:bg-slate-600":"bg-gray-200 hover:bg-orange-200"}`,children:o===s.id?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current"}):e.jsx(P,{className:"text-xs"})}),e.jsx("span",{className:"w-8 text-center font-bold",children:s.quantity}),e.jsx("button",{onClick:()=>d(s.id,s.quantity+1),disabled:o===s.id,className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors disabled:opacity-50 ${t?"bg-slate-700 hover:bg-slate-600":"bg-gray-200 hover:bg-orange-200"}`,children:o===s.id?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current"}):e.jsx(T,{className:"text-xs"})})]}),e.jsx("div",{className:"flex gap-1",children:F.map(l=>e.jsx("button",{onClick:()=>d(s.id,l),className:`px-2 py-1 text-xs rounded transition-colors ${s.quantity===l?"bg-orange-500 text-white":t?"bg-slate-700 text-gray-300 hover:bg-slate-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:l},l))})]})}),e.jsxs("div",{className:"hidden sm:block text-right min-w-24",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-orange-600 dark:text-orange-400 font-saiyan",children:e.jsx(i,{value:parseFloat(s.price)*s.quantity})}),e.jsxs("div",{className:`text-sm ${a.text.muted}`,children:[e.jsx(i,{value:parseFloat(s.price)})," each"]})]}),e.jsx("button",{onClick:()=>E(s.id,s.name),disabled:m===s.id,className:"hidden sm:flex text-red-500 hover:text-red-700 transition-colors p-2 disabled:opacity-50 items-center justify-center w-10 h-10","aria-label":`Remove ${s.name} from cart`,children:m===s.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-500"}):e.jsx(R,{})})]})})},s.id)),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:[e.jsx("button",{onClick:B,className:"text-red-500 hover:text-red-700 transition-colors font-medium text-sm py-2 px-4 rounded-lg border border-red-200 dark:border-red-800 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Clear All Items"}),e.jsx("div",{className:"flex-1"}),e.jsx(u,{to:"/products",className:`text-center py-2 px-4 rounded-lg font-medium transition-colors text-sm ${a.button.secondary}`,children:"Continue Shopping"})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:`rounded-2xl shadow-lg p-4 sm:p-6 sticky top-4 ${a.card}`,children:[e.jsx("h3",{className:`text-xl sm:text-2xl font-bold font-saiyan mb-4 sm:mb-6 ${a.text.primary}`,children:"ORDER SUMMARY"}),e.jsxs("div",{className:"space-y-3 sm:space-y-4 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm sm:text-base",children:[e.jsxs("span",{className:a.text.secondary,children:["Items (",r.length,"):"]}),e.jsx("span",{className:`font-bold ${a.text.primary}`,children:e.jsx(i,{value:h})})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm sm:text-base",children:[e.jsx("span",{className:a.text.secondary,children:"Shipping:"}),e.jsx("span",{className:`font-bold ${g?"text-green-500":a.text.primary}`,children:g?"FREE":e.jsx(i,{value:$})})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm sm:text-base",children:[e.jsx("span",{className:a.text.secondary,children:"Tax (8%):"}),e.jsx("span",{className:`font-bold ${a.text.primary}`,children:e.jsx(i,{value:S})})]}),e.jsx("hr",{className:"border-gray-200 dark:border-slate-600"}),e.jsxs("div",{className:"flex justify-between items-center text-lg sm:text-xl",children:[e.jsx("span",{className:`font-bold ${a.text.primary}`,children:"Total:"}),e.jsx("span",{className:"font-bold text-orange-600 dark:text-orange-400 font-saiyan",children:e.jsx(i,{value:q})})]}),!g&&h>0&&e.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-gradient-to-r from-blue-50 to-orange-50 dark:from-blue-900/20 dark:to-orange-900/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(A,{className:"text-orange-500 text-sm"}),e.jsx("span",{className:`text-sm font-medium ${a.text.primary}`,children:"Free Shipping at $500!"})]}),e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{className:a.text.muted,children:["$",U.toFixed(2)," away"]}),e.jsxs("span",{className:a.text.muted,children:[C.toFixed(0),"%"]})]}),e.jsx("div",{className:`w-full h-2 rounded-full ${t?"bg-slate-600":"bg-gray-200"}`,children:e.jsx("div",{className:"h-full bg-gradient-to-r from-orange-400 to-orange-600 rounded-full transition-all duration-500",style:{width:`${C}%`}})})]}),g&&e.jsx("div",{className:"mt-3 p-3 rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"text-green-500 text-sm"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"üéâ You've unlocked FREE shipping!"})]})})]}),e.jsx("button",{onClick:D,className:`w-full py-3 sm:py-4 rounded-xl font-saiyan font-bold text-sm sm:text-lg kamehameha-glow transition-all hover:scale-105 hover:shadow-xl mb-3 ${a.button.primary}`,children:v?"PROCEED TO CHECKOUT":"LOGIN TO CHECKOUT"}),!v&&e.jsx("p",{className:`text-center text-xs ${a.text.muted} mb-3`,children:"Sign in for faster checkout and order tracking"}),e.jsxs("div",{className:"mt-4 sm:mt-6 pt-4 sm:pt-6 border-t border-gray-200 dark:border-slate-600",children:[e.jsxs("h4",{className:`font-bold mb-3 flex items-center gap-2 ${a.text.primary}`,children:[e.jsx(W,{className:"text-blue-500"}),"Secure Checkout"]}),e.jsxs("div",{className:"space-y-2 text-xs sm:text-sm",children:[e.jsxs("div",{className:`flex items-center gap-2 ${a.text.muted}`,children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Capsule Corp Encryption"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${a.text.muted}`,children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Saiyan-Grade Security"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${a.text.muted}`,children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),e.jsx("span",{children:"Dragon Ball Warranty"})]})]})]})]})})]}),r.length>0&&e.jsxs("div",{className:`mt-6 sm:mt-8 rounded-2xl shadow-lg p-4 sm:p-6 border-2 ${t?"bg-gradient-to-r from-blue-900 via-purple-900 to-blue-900 border-orange-500":"bg-gradient-to-r from-blue-900 via-purple-900 to-blue-900 border-orange-400"}`,children:[e.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[e.jsx("div",{className:"text-2xl sm:text-3xl",children:"‚ö°"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white font-saiyan mb-1 sm:mb-2",children:"CAPSULE CORP ALERT"}),e.jsx("p",{className:"text-blue-200 text-xs sm:text-sm italic",children:"Read this carefully before your legendary purchase!"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4 text-xs sm:text-sm text-blue-100",children:[e.jsx("div",{className:"bg-blue-950/50 rounded-lg p-3 sm:p-4 border border-blue-700/50",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(X,{className:"text-orange-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-orange-300",children:"Reservation Policy:"}),e.jsx("p",{className:"mt-1",children:"Placing an order or adding an item to your capsule collection does not reserve the item or lock the price. Items are only secured once your payment has been received and processed by our Earth Defense systems."})]})]})}),e.jsx("div",{className:"bg-blue-950/50 rounded-lg p-3 sm:p-4 border border-blue-700/50",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Z,{className:"text-green-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-green-300",children:"Instant Transmission Delivery:"}),e.jsx("p",{className:"mt-1",children:"FREE delivery on eligible capsules is only available to main cities and training grounds. Remote locations may require additional Senzu Bean courier fees."})]})]})}),e.jsx("div",{className:"bg-blue-950/50 rounded-lg p-3 sm:p-4 border border-blue-700/50",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(_,{className:"text-purple-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-purple-300",children:"Hyperbolic Time Processing:"}),e.jsx("p",{className:"mt-1",children:"Orders placed after business hours (6:00 PM EST), on weekends, or during Galactic holidays will be processed the following business day."})]})]})}),e.jsx("div",{className:"bg-blue-950/50 rounded-lg p-3 sm:p-4 border border-blue-700/50",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-yellow-400 font-bold text-base",children:"üì¶"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-yellow-300",children:"Power Level Preparation Time:"}),e.jsxs("p",{className:"mt-1",children:[e.jsx(u,{to:"/shipping-info",className:"text-orange-300 hover:text-orange-400 underline font-medium",children:"Click here to view current estimated lead times"})," ","for order processing and capsule preparation."]})]})]})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-blue-700/50 text-center",children:e.jsx("p",{className:"text-xs text-blue-300",children:"‚≠ê Capsule Corp - Serving Earth's Warriors Since Age 712 ‚≠ê"})})]})]})})}ae.displayName="CartPage";export{ae as default};
