import{r as i,j as e,u as J,F as pe,a as fe,b as ye,c as be,d as je,e as ve,f as H,g as Ne,h as $,i as z,k as ae,l as we,m as Z,n as Q,o as X,p as Se,q as ke,s as V,t as ee}from"./vendor_react-haPYDNah.js";import{i as Ce,g as Ae,G as Ee,o as _e,s as Te}from"./vendor-Bpvzf4S2.js";const Re="AIzaSyCL6-_6R38Tu-3sQPQzK2r_PEAKjzo4jLA",Ue="capsule-corp-auth-5af46.firebaseapp.com",Fe="capsule-corp-auth-5af46",Oe="capsule-corp-auth-5af46.firebasestorage.app",De="917322465277",Ie="1:917322465277:web:f20e4e372b6a7842676394",Le="";let L=null,te=null,se=null;se=Ce({apiKey:Re,authDomain:Ue,projectId:Fe,storageBucket:Oe,messagingSenderId:De,appId:Ie,measurementId:Le}),L=Ae(se),te=new Ee,te.setCustomParameters({prompt:"select_account"});const Pe="https://backend-y3z0.onrender.com",Ge="Network error. Please check your connection or try again later.";async function A(s,u={}){const a=localStorage.getItem("authToken"),N={...u&&u.body&&u.body instanceof FormData?{}:{"Content-Type":"application/json"},...u.headers||{}};a&&(N.Authorization=`Bearer ${a}`);try{const b=await fetch(Pe+s,{credentials:u.credentials??"omit",...u,headers:N}),f=await b.json().catch(()=>null);if(!b.ok){const S=new Error(f?.error||f?.message||`Request failed (${b.status})`);throw S.status=b.status,S.body=f,S}return f}catch(b){const f=new Error(Ge);throw f.cause=b,f}}const re=i.createContext(null);function We({children:s}){const[u,a]=i.useState(null),[x,N]=i.useState(!0);i.useEffect(()=>{let d=!0;if(!L)return(async()=>{try{const o=await A("/api/me");d&&o.user?a(o.user):(a(null),localStorage.removeItem("authToken"))}catch{a(null),localStorage.removeItem("authToken")}d&&N(!1)})(),()=>{d=!1};const h=_e(L,async o=>{if(d){if(o){const j={uid:o.uid,email:o.email,displayName:o.displayName,photoURL:o.photoURL,emailVerified:o.emailVerified,provider:o.providerData[0]?.providerId||"email"};a(j);try{const C=await o.getIdToken(),r=await A("/api/auth/firebase-sync",{method:"POST",body:JSON.stringify({uid:o.uid,email:o.email,displayName:o.displayName})});r.token&&localStorage.setItem("authToken",r.token),r.user&&a({...j,...r.user})}catch(C){console.error("Error syncing Firebase user with backend:",C)}}else try{const j=await A("/api/me");d&&j.user?a(j.user):(a(null),localStorage.removeItem("authToken"))}catch{a(null),localStorage.removeItem("authToken")}d&&N(!1)}});return()=>{d=!1,typeof h=="function"&&h()}},[]);const b=async(d,h)=>{const o=await A("/api/auth/login",{method:"POST",body:JSON.stringify({email:d,password:h})});return o.user&&a(o.user),o.token&&localStorage.setItem("authToken",o.token),o},f=async(d,h,o="",j="")=>{const C=await A("/api/auth/signup",{method:"POST",body:JSON.stringify({email:d,password:h,firstName:o,lastName:j})});return C.user&&a(C.user),C.token&&localStorage.setItem("authToken",C.token),C},S=async()=>{try{L&&await Te(L);try{await A("/api/auth/logout",{method:"POST"})}catch(d){console.error("Backend logout error:",d)}}catch(d){console.error("Firebase logout error:",d)}a(null),localStorage.removeItem("authToken")},g=async d=>{try{const h=await A("/api/profile",{method:"PUT",body:JSON.stringify(d)});return h.user&&a(h.user),h}catch(h){throw console.error("Profile update error:",h),h}},y=async(d,h)=>{try{return await A("/api/auth/change-password",{method:"POST",body:JSON.stringify({currentPassword:d,newPassword:h})})}catch(o){throw console.error("Password change error:",o),o}};return e.jsx(re.Provider,{value:{user:u,loading:x,login:b,signup:f,logout:S,updateProfile:g,changePassword:y,setUser:a},children:s})}const q=()=>i.useContext(re),ne=i.createContext();function Ze({children:s}){const[u,a]=i.useState([]),x=i.useCallback((g,y={})=>{const d=Date.now(),h={id:d,type:"success",message:g,duration:y.duration||3e3,...y};a(o=>[...o,h]),setTimeout(()=>{a(o=>o.filter(j=>j.id!==d))},h.duration)},[]),N=i.useCallback((g,y={})=>{const d=Date.now(),h={id:d,type:"error",message:g,duration:y.duration||4e3,...y};a(o=>[...o,h]),setTimeout(()=>{a(o=>o.filter(j=>j.id!==d))},h.duration)},[]),b=i.useCallback((g,y={})=>{const d=Date.now(),h={id:d,type:"info",message:g,duration:y.duration||3e3,...y};a(o=>[...o,h]),setTimeout(()=>{a(o=>o.filter(j=>j.id!==d))},h.duration)},[]),f=i.useCallback((g,y={})=>{const d=Date.now(),h={id:d,type:"warning",message:g,duration:y.duration||3500,...y};a(o=>[...o,h]),setTimeout(()=>{a(o=>o.filter(j=>j.id!==d))},h.duration)},[]),S=i.useCallback(g=>{a(y=>y.filter(d=>d.id!==g))},[]);return e.jsxs(ne.Provider,{value:{notifications:u,showSuccess:x,showError:N,showInfo:b,showWarning:f,removeNotification:S},children:[s,e.jsx("div",{className:"fixed top-4 right-4 z-[9999] space-y-2",children:u.map(g=>e.jsx("div",{className:`
              min-w-[300px] max-w-md p-4 rounded-lg shadow-2xl
              transform transition-all duration-300 ease-in-out
              animate-slide-in-right
              ${g.type==="success"?"bg-green-500 text-white":""}
              ${g.type==="error"?"bg-red-500 text-white":""}
              ${g.type==="info"?"bg-blue-500 text-white":""}
              ${g.type==="warning"?"bg-yellow-500 text-white":""}
            `,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("p",{className:"flex-1 font-medium",children:g.message}),e.jsx("button",{onClick:()=>S(g.id),className:"ml-3 text-white hover:text-gray-200 transition-colors",children:"✕"})]})},g.id))})]})}function Me(){const s=i.useContext(ne);if(!s)throw new Error("useNotifications must be used within NotificationProvider");return s}const le=i.createContext(),U={USD:{code:"USD",symbol:"$",name:"US Dollar",country:"United States",flag:"🇺🇸",locale:"en-US",region:"North America",available:!0},ZAR:{code:"ZAR",symbol:"R",name:"South African Rand",country:"South Africa",flag:"🇿🇦",locale:"en-ZA",region:"Africa",available:!0},EUR:{code:"EUR",symbol:"€",name:"Euro",country:"European Union",flag:"🇪🇺",locale:"de-DE",region:"Europe",available:!0},GBP:{code:"GBP",symbol:"£",name:"British Pound",country:"United Kingdom",flag:"🇬🇧",locale:"en-GB",region:"Europe",available:!0},JPY:{code:"JPY",symbol:"¥",name:"Japanese Yen",country:"Japan",flag:"🇯🇵",locale:"ja-JP",region:"Asia",available:!1,restriction:"Majin Buu turned everyone into chocolate! Instant Transmission unavailable."},AUD:{code:"AUD",symbol:"A$",name:"Australian Dollar",country:"Australia",flag:"🇦🇺",locale:"en-AU",region:"Oceania",available:!1,restriction:"Frieza is currently destroying this sector. Check back after Goku arrives!"},CAD:{code:"CAD",symbol:"C$",name:"Canadian Dollar",country:"Canada",flag:"🇨🇦",locale:"en-CA",region:"North America",available:!1,restriction:"The Hyperbolic Time Chamber is under maintenance. Delivery time unknown!"}},Qe=({children:s})=>{const[u,a]=i.useState(()=>localStorage.getItem("capsule_currency")||"USD"),[x,N]=i.useState({USD:1,ZAR:18.5,EUR:.92,GBP:.79,JPY:149.5,AUD:1.52,CAD:1.36}),[b,f]=i.useState(()=>{const r=localStorage.getItem("capsule_location");return r?JSON.parse(r):{country:"United States",countryCode:"US",region:"North America"}});i.useEffect(()=>{localStorage.setItem("capsule_currency",u)},[u]),i.useEffect(()=>{localStorage.setItem("capsule_location",JSON.stringify(b))},[b]),i.useEffect(()=>{(async()=>{if(!localStorage.getItem("capsule_location_detected"))try{const p=await(await fetch("https://ipapi.co/json/")).json();if(p.country_code){const c=S(p.country_code);U[c]?.available&&(a(c),f({country:p.country_name,countryCode:p.country_code,region:p.continent_code}),localStorage.setItem("capsule_location_detected","true"))}}catch{console.log("Location detection failed, using default USD")}})()},[]);const S=r=>({US:"USD",ZA:"ZAR",GB:"GBP",JP:"JPY",AU:"AUD",CA:"CAD",DE:"EUR",FR:"EUR",IT:"EUR",ES:"EUR",NL:"EUR",BE:"EUR",AT:"EUR",PT:"EUR",IE:"EUR",FI:"EUR",GR:"EUR"})[r]||"USD",g=r=>{const l=x[u]||1;return r*l},y=(r,l={})=>{const v=g(r),p=U[u];return new Intl.NumberFormat(p.locale,{style:"currency",currency:u,minimumFractionDigits:l.decimals??2,maximumFractionDigits:l.decimals??2,...l}).format(v)},d=r=>{if(U[r]){if(a(r),typeof window<"u")try{console.info("[Currency] changeCurrency called ->",r)}catch{}const l=U[r];f({country:l.country,countryCode:r==="EUR"?"EU":l.country.substring(0,2).toUpperCase(),region:l.region})}};i.useEffect(()=>(typeof window<"u"&&(window.__capsule=window.__capsule||{},window.__capsule.changeCurrency=d,window.__capsule.currency=u,window.__capsule.currencyInfo=U[u]),()=>{}),[u,d]);const h=()=>Object.values(U).filter(r=>r.available),o=()=>Object.values(U),j=r=>{N(l=>({...l,...r}))},C={currency:u,currencyInfo:U[u],location:b,exchangeRates:x,convertPrice:g,formatPrice:y,changeCurrency:d,setLocation:f,getAvailableCurrencies:h,getAllCurrencies:o,updateExchangeRates:j,CURRENCIES:U};return e.jsx(le.Provider,{value:C,children:s})},Be=()=>{const s=i.useContext(le);if(!s)throw new Error("useCurrency must be used within CurrencyProvider");return s},P=({value:s=0,decimals:u,className:a=""})=>{const{formatPrice:x}=Be();return s==null||Number.isNaN(Number(s))?null:e.jsx("span",{className:a,children:x(Number(s),{decimals:u})})};function $e(){const{user:s,logout:u}=q(),a=J(),[x,N]=i.useState({totalUsers:1247,totalProducts:32,totalOrders:893,totalRevenue:28479325e-1,monthlyGrowth:12.5,topProducts:["Saiyan Battle Armor","Elite Scouter Mk III","Gravity Chamber"]});i.useEffect(()=>{if(!s){a("/auth");return}if(!(s.email?.includes("admin")||s.role==="admin"||s.email==="mario@capsulecorp.com")){a("/");return}},[s,a]);const b=()=>{u(),a("/")};return s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50",children:[e.jsx("header",{className:"bg-gradient-to-r from-[#3B4CCA] to-blue-600 shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#FFD700] to-[#FF9E00] rounded-full flex items-center justify-center",children:e.jsx(pe,{className:"text-[#3B4CCA] text-lg"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white font-saiyan",children:"CAPSULE CORP ADMIN"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Management Dashboard"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-white text-right",children:[e.jsx("p",{className:"font-saiyan text-sm",children:"Welcome back,"}),e.jsx("p",{className:"text-[#FFD700] font-bold",children:s.displayName||s.email})]}),e.jsxs("button",{onClick:b,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-saiyan text-sm transition-colors flex items-center space-x-2",children:[e.jsx(fe,{}),e.jsx("span",{children:"LOGOUT"})]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800 font-saiyan",children:x.totalUsers.toLocaleString()})]}),e.jsx(ye,{className:"text-blue-500 text-3xl"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-orange-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Products"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800 font-saiyan",children:x.totalProducts})]}),e.jsx(be,{className:"text-orange-500 text-3xl"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800 font-saiyan",children:x.totalOrders.toLocaleString()})]}),e.jsx(je,{className:"text-green-500 text-3xl"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-purple-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-800 font-saiyan",children:["$",x.totalRevenue.toLocaleString()]})]}),e.jsx(ve,{className:"text-purple-500 text-3xl"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 font-saiyan mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>a("/admin/products"),className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-4 rounded-lg font-saiyan font-bold hover:scale-105 transition-all",children:"MANAGE PRODUCTS"}),e.jsx("button",{onClick:()=>a("/admin/orders"),className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-3 px-4 rounded-lg font-saiyan font-bold hover:scale-105 transition-all",children:"VIEW ORDERS"}),e.jsx("button",{onClick:()=>a("/admin/users"),className:"w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white py-3 px-4 rounded-lg font-saiyan font-bold hover:scale-105 transition-all",children:"MANAGE USERS"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 font-saiyan mb-4",children:"Monthly Growth"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl font-bold text-green-500 font-saiyan mb-2",children:["+",x.monthlyGrowth,"%"]}),e.jsx("p",{className:"text-gray-600",children:"Revenue increase this month"}),e.jsx("div",{className:"mt-4 bg-green-100 rounded-lg p-3",children:e.jsx("p",{className:"text-green-700 font-medium",children:"📈 Excellent performance!"})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 font-saiyan mb-4",children:"Top Products"}),e.jsx("div",{className:"space-y-3",children:x.topProducts.map((f,S)=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-400 to-orange-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:S+1}),e.jsx("span",{className:"text-gray-700 font-medium text-sm",children:f})]},S))})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 font-saiyan mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"New order #1247 - Saiyan Battle Armor"}),e.jsx("span",{className:"text-gray-500 text-sm ml-auto",children:"2 minutes ago"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"User registration: goku@dbz.com"}),e.jsx("span",{className:"text-gray-500 text-sm ml-auto",children:"5 minutes ago"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Low stock alert: Dragon Radar (3 left)"}),e.jsx("span",{className:"text-gray-500 text-sm ml-auto",children:"1 hour ago"})]})]})]})]})]}):e.jsx("div",{children:"Loading..."})}const Xe=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"}));function ze(){const{user:s}=q(),u=J(),[a,x]=i.useState([]),[N,b]=i.useState(!0),[f,S]=i.useState(null),[g,y]=i.useState(""),[d,h]=i.useState("all"),[o,j]=i.useState(!1),[C,r]=i.useState(!1),[l,v]=i.useState(null);i.useEffect(()=>{if(!s){u("/auth");return}if(!(s.email?.includes("admin")||s.role==="admin"||s.email==="mario@capsulecorp.com")){u("/");return}},[s,u]),i.useEffect(()=>{const t=async()=>{try{b(!0),S(null);const w=await A("/api/products");x(w.products||[])}catch(w){console.error("Error fetching products:",w),S("Failed to load products. Please try again.")}finally{b(!1)}};s&&(s.email?.includes("admin")||s.role==="admin"||s.email==="mario@capsulecorp.com")&&t()},[s]);const p=a.filter(t=>{if(!t)return!1;const w=t.name||"",m=t.description||"",T=t.category||"";return(w.toLowerCase().includes(g.toLowerCase())||m.toLowerCase().includes(g.toLowerCase()))&&(d==="all"||T===d)}),c=[...new Set(a.map(t=>t&&t.category).filter(Boolean))],E=async t=>{if(window.confirm("⚠️ Are you sure you want to delete this product? This action cannot be undone!"))try{await A(`/api/products/${t}`,{method:"DELETE"}),x(a.filter(w=>w.id!==t))}catch(w){console.error("Error deleting product:",w),alert("❌ Failed to delete product. Please try again.")}},_=t=>{v(t),r(!0)},R=async t=>{try{let w;if(t.imageFiles&&t.imageFiles.length){const m=new FormData;m.append("name",t.name),m.append("slug",t.slug),m.append("description",t.description),m.append("category",t.category),m.append("price",String(t.price)),m.append("original_price",String(t.originalPrice||t.price)),m.append("power_level",String(t.powerLevel||0)),m.append("in_stock",t.inStock?"1":"0"),m.append("stock",String(t.stock)),m.append("featured",t.featured?"1":"0"),m.append("tags",JSON.stringify(t.tags||[])),m.append("specifications",JSON.stringify(t.specifications||{})),t.imageFiles.forEach(T=>m.append("images",T)),t.gallery&&t.gallery.length&&m.append("gallery",JSON.stringify(t.gallery)),w=await A(`/api/products/${t.id}`,{method:"PUT",body:m})}else w=await A(`/api/products/${t.id}`,{method:"PUT",body:JSON.stringify({name:t.name,slug:t.slug,description:t.description,category:t.category,price:t.price,original_price:t.originalPrice||t.price,power_level:t.powerLevel,image:t.image||t.imageUrl,gallery:t.gallery||[],in_stock:t.inStock,stock:t.stock,featured:t.featured||!1,tags:t.tags||[],specifications:t.specifications||{}})});x(a.map(m=>m.id===t.id?w.product:m)),r(!1),v(null)}catch(w){console.error("Error updating product:",w),alert("❌ Failed to update product. Please try again.")}},O=async t=>{try{let w;if(t.imageFiles&&t.imageFiles.length){const m=new FormData;m.append("name",t.name),m.append("slug",t.name.toLowerCase().replace(/\s+/g,"-")),m.append("description",t.description),m.append("category",t.category),m.append("price",String(t.price)),m.append("original_price",String(t.price)),m.append("power_level",String(t.powerLevel||0)),m.append("in_stock",t.inStock?"1":"0"),m.append("stock",String(t.stock)),m.append("featured","0"),m.append("tags",JSON.stringify([])),m.append("specifications",JSON.stringify({})),t.imageFiles.forEach(T=>m.append("images",T)),t.imageUrls&&t.imageUrls.length&&m.append("gallery",JSON.stringify(t.imageUrls)),w=await A("/api/products",{method:"POST",body:m})}else w=await A("/api/products",{method:"POST",body:JSON.stringify({name:t.name,slug:t.name.toLowerCase().replace(/\s+/g,"-"),description:t.description,category:t.category,price:t.price,original_price:t.price,power_level:t.powerLevel,image:t.imageUrls?.[0]||"https://res.cloudinary.com/dx8wt3el4/image/upload/v1759096578/c3_kamzog.jpg",gallery:t.imageUrls?.length?t.imageUrls:["https://res.cloudinary.com/dx8wt3el4/image/upload/v1759096578/c3_kamzog.jpg"],in_stock:t.inStock,stock:t.stock,featured:!1,tags:[],specifications:{}})});x([...a,w.product]),j(!1)}catch(w){console.error("Error adding product:",w),alert("❌ Failed to add product. Please try again.")}},G=t=>{const w=t.inStock||t.in_stock,m=t.stock;return w?m<=5?{text:"Low Stock",color:"text-orange-600 bg-orange-100"}:{text:"In Stock",color:"text-green-600 bg-green-100"}:{text:"Out of Stock",color:"text-red-600 bg-red-100"}};return s?s.email?.includes("admin")||s.role==="admin"||s.email==="mario@capsulecorp.com"?N?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-saiyan",children:"LOADING PRODUCTS..."})]})}):f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-xl font-bold text-red-800 mb-2 font-saiyan",children:"ERROR"}),e.jsx("p",{className:"text-red-600 mb-4",children:f}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-xl font-saiyan hover:bg-red-700 transition-all",children:"TRY AGAIN"})]})})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50",children:[e.jsx("header",{className:"bg-gradient-to-r from-[#3B4CCA] to-blue-600 shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>u("/admin"),className:"text-white hover:text-[#FFD700] transition-colors",children:e.jsx(H,{className:"text-xl"})}),e.jsx("h1",{className:"text-2xl font-bold text-white font-saiyan",children:"PRODUCT MANAGEMENT"})]}),e.jsxs("button",{onClick:()=>j(!0),className:"bg-gradient-to-r from-orange-400 to-orange-600 text-white px-6 py-2 rounded-lg font-saiyan font-bold hover:scale-105 transition-all flex items-center space-x-2",children:[e.jsx(Ne,{}),e.jsx("span",{children:"ADD PRODUCT"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:g,onChange:t=>y(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("select",{value:d,onChange:t=>h(t.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),c.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",p.length," of ",a.length," products"]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(t=>{const w=G(t);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:e.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:t.image,alt:t.name,onError:m=>{m.target.src="/api/placeholder/48/48"}})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 font-saiyan",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["PL: ",(t.powerLevel||t.power_level||0).toLocaleString()]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-saiyan",children:e.jsx(P,{value:parseFloat(t.price||0)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[t.stock," units"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w.color}`,children:w.text})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>u(`/product/${t.slug}`),className:"text-blue-600 hover:text-blue-900",title:"View Product",children:e.jsx(z,{})}),e.jsx("button",{onClick:()=>_(t),className:"text-orange-600 hover:text-orange-900",title:"Edit Product",children:e.jsx(ae,{})}),e.jsx("button",{onClick:()=>E(t.id),className:"text-red-600 hover:text-red-900",title:"Delete Product",children:e.jsx(we,{})})]})})]},t.id)})})]})})}),p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx($,{className:"text-6xl text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 font-saiyan mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria"})]})]}),o&&e.jsx(Je,{onSave:O,onCancel:()=>j(!1)}),C&&l&&e.jsx(qe,{product:l,onSave:R,onCancel:()=>{r(!1),v(null)}})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🚫"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 font-saiyan mb-4",children:"ACCESS DENIED"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have admin privileges."}),e.jsx("button",{onClick:()=>u("/"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-saiyan hover:bg-blue-700",children:"GO HOME"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-saiyan",children:"CHECKING AUTHENTICATION..."})]})})}function Je({onSave:s,onCancel:u}){const[a,x]=i.useState({name:"",description:"",price:"",category:"Battle Gear",stock:"",powerLevel:"",inStock:!0}),[N,b]=i.useState([]),[f,S]=i.useState(""),[g,y]=i.useState([]),d=r=>{r.preventDefault(),s({...a,price:parseFloat(a.price),stock:parseInt(a.stock),powerLevel:parseInt(a.powerLevel)||0,imageFiles:N,imageUrl:g.length?g[0]:f,imageUrls:g})},h=(r,l)=>{x(v=>({...v,[r]:l}))},o=()=>{f.trim()&&(y(r=>[...r,f.trim()]),S(""))},j=r=>{y(l=>l.filter((v,p)=>p!==r))},C=r=>{b(l=>l.filter((v,p)=>p!==r))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 font-saiyan mb-6",children:"ADD NEW PRODUCT"}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"PRODUCT NAME"}),e.jsx("input",{type:"text",value:a.name,onChange:r=>h("name",r.target.value),placeholder:"Enter product name",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-saiyan",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"DESCRIPTION"}),e.jsx("textarea",{value:a.description,onChange:r=>h("description",r.target.value),placeholder:"Enter product description",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-24 resize-none",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"PRICE ($)"}),e.jsx("input",{type:"number",step:"0.01",value:a.price,onChange:r=>h("price",r.target.value),placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-saiyan",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"STOCK"}),e.jsx("input",{type:"number",value:a.stock,onChange:r=>h("stock",r.target.value),placeholder:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-saiyan",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"CATEGORY"}),e.jsxs("select",{value:a.category,onChange:r=>h("category",r.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-saiyan",required:!0,children:[e.jsx("option",{value:"Battle Gear",children:"Battle Gear"}),e.jsx("option",{value:"Training",children:"Training"}),e.jsx("option",{value:"Technology",children:"Technology"}),e.jsx("option",{value:"Capsules",children:"Capsules"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"POWER LEVEL"}),e.jsx("input",{type:"number",value:a.powerLevel,onChange:r=>h("powerLevel",r.target.value),placeholder:"9000",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-saiyan"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"inStockAdd",checked:a.inStock,onChange:r=>h("inStock",r.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"inStockAdd",className:"text-sm font-saiyan text-gray-700",children:"IN STOCK"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"IMAGE (file upload) — you can select multiple"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:r=>b(r.target.files?Array.from(r.target.files):[]),className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Or paste an image URL below and click "Add to Gallery".'}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("input",{type:"text",value:f,onChange:r=>S(r.target.value),placeholder:"https://...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Add to Gallery"})]}),N.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-saiyan text-gray-700 mb-2",children:"Files to upload:"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:N.map((r,l)=>e.jsxs("div",{className:"relative border border-gray-300 rounded-lg p-2 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:()=>C(l),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center hover:bg-red-600",children:"×"}),e.jsx("p",{className:"text-xs text-gray-600 truncate pr-6",children:r.name})]},l))})]}),g.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-saiyan text-gray-700 mb-2",children:"Image URLs:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.map((r,l)=>e.jsxs("div",{className:"relative border border-gray-300 rounded-lg overflow-hidden",children:[e.jsx("button",{type:"button",onClick:()=>j(l),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 z-10",children:"×"}),e.jsx("img",{src:r,alt:`Preview ${l+1}`,className:"w-full h-24 object-cover"})]},l))})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"flex-1 bg-gray-300 text-gray-700 py-3 px-4 rounded-lg font-saiyan font-bold hover:bg-gray-400 transition-colors",children:"CANCEL"}),e.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-orange-400 to-orange-600 text-white py-3 px-4 rounded-lg font-saiyan font-bold hover:scale-105 transition-all",children:"CREATE PRODUCT"})]})]})]})})}function qe({product:s,onSave:u,onCancel:a}){const[x,N]=i.useState({name:s.name,description:s.description,price:s.price,category:s.category,stock:s.stock,powerLevel:s.powerLevel||s.power_level||0,inStock:s.inStock!==void 0?s.inStock:s.in_stock}),[b,f]=i.useState([]),[S,g]=i.useState(""),[y,d]=i.useState(s.gallery||[]),h=l=>{l.preventDefault(),u({...s,...x,price:parseFloat(x.price),stock:parseInt(x.stock),powerLevel:parseInt(x.powerLevel),originalPrice:s.originalPrice||s.original_price||x.price,slug:s.slug,image:y.length?y[0]:s.image,imageFiles:b,gallery:y,imageUrls:y,featured:s.featured||!1,tags:s.tags||[],specifications:s.specifications||{}})},o=(l,v)=>{N(p=>({...p,[l]:v}))},j=()=>{S.trim()&&(d(l=>[...l,S.trim()]),g(""))},C=l=>{d(v=>v.filter((p,c)=>c!==l))},r=l=>{f(v=>v.filter((p,c)=>c!==l))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 font-saiyan mb-6",children:"EDIT PRODUCT"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"PRODUCT NAME"}),e.jsx("input",{type:"text",value:x.name,onChange:l=>o("name",l.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-saiyan",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"DESCRIPTION"}),e.jsx("textarea",{value:x.description,onChange:l=>o("description",l.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-24 resize-none",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"PRICE ($)"}),e.jsx("input",{type:"number",step:"0.01",value:x.price,onChange:l=>o("price",l.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-saiyan",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"STOCK"}),e.jsx("input",{type:"number",value:x.stock,onChange:l=>o("stock",l.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-saiyan",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"CATEGORY"}),e.jsxs("select",{value:x.category,onChange:l=>o("category",l.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-saiyan",required:!0,children:[e.jsx("option",{value:"Battle Gear",children:"Battle Gear"}),e.jsx("option",{value:"Training",children:"Training"}),e.jsx("option",{value:"Technology",children:"Technology"}),e.jsx("option",{value:"Capsules",children:"Capsules"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"POWER LEVEL"}),e.jsx("input",{type:"number",value:x.powerLevel,onChange:l=>o("powerLevel",l.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-saiyan"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"inStock",checked:x.inStock,onChange:l=>o("inStock",l.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"inStock",className:"text-sm font-saiyan text-gray-700",children:"IN STOCK"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"MANAGE GALLERY — Add or Remove Images"}),y.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm font-saiyan text-gray-700 mb-2",children:["Current Gallery (",y.length," images):"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:y.map((l,v)=>e.jsxs("div",{className:"relative border border-gray-300 rounded-lg overflow-hidden",children:[e.jsx("button",{type:"button",onClick:()=>C(v),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 z-10 text-sm font-bold",children:"×"}),e.jsx("img",{src:l,alt:`Gallery ${v+1}`,className:"w-full h-24 object-cover"}),v===0&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-blue-500 bg-opacity-75 text-white text-xs text-center py-1",children:"Main Image"})]},v))})]}),e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"Upload files (multiple)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:l=>f(l.target.files?Array.from(l.target.files):[]),className:"w-full"}),b.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-saiyan text-gray-700 mb-2",children:"Files to upload:"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:b.map((l,v)=>e.jsxs("div",{className:"relative border border-gray-300 rounded-lg p-2 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:()=>r(v),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center hover:bg-red-600",children:"×"}),e.jsx("p",{className:"text-xs text-gray-600 truncate pr-6",children:l.name})]},v))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'Or paste an image URL below and click "Add to Gallery".'}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("input",{type:"text",value:S,onChange:l=>g(l.target.value),placeholder:"https://...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Add to Gallery"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"flex-1 bg-gray-300 text-gray-700 py-3 px-4 rounded-lg font-saiyan font-bold hover:bg-gray-400 transition-colors",children:"CANCEL"}),e.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-orange-400 to-orange-600 text-white py-3 px-4 rounded-lg font-saiyan font-bold hover:scale-105 transition-all",children:"UPDATE PRODUCT"})]})]})]})})}const et=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));function Ke(){const{user:s}=q(),u=J(),{showSuccess:a,showError:x}=Me(),[N,b]=i.useState([]),[f,S]=i.useState(null),[g,y]=i.useState(""),[d,h]=i.useState("all"),[o,j]=i.useState("all"),[C,r]=i.useState(!0),[l,v]=i.useState(!1),[p,c]=i.useState(null),[E,_]=i.useState(!1),[R,O]=i.useState({tracking_number:"",carrier:""}),[G,K]=i.useState(""),[t,w]=i.useState(!0),m=i.useCallback(async(n=!0)=>{try{n?r(!0):v(!0);const k={};if(d!=="all"&&(k.status=d),g&&(k.search=g),o!=="all"){const D=new Date;let I;switch(o){case"today":I=new Date(D.setHours(0,0,0,0));break;case"week":I=new Date(D.setDate(D.getDate()-7));break;case"month":I=new Date(D.setMonth(D.getMonth()-1));break;default:break}I&&(k.date_from=I.toISOString().split("T")[0])}const F=new URLSearchParams(k).toString(),W=await A(`/api/orders?${F}`,{headers:{"x-user-email":s?.email}});W.orders&&b(W.orders)}catch(k){console.error("Error fetching orders:",k),x("Failed to fetch orders")}finally{r(!1),v(!1)}},[d,g,o,s,x]),T=i.useCallback(async()=>{try{const n=await A("/api/orders/statistics",{headers:{"x-user-email":s?.email}});n.statistics&&S(n.statistics)}catch(n){console.error("Error fetching statistics:",n)}},[s]);i.useEffect(()=>{s&&(m(),T())},[s,m,T]),i.useEffect(()=>{if(!t)return;const n=setInterval(()=>{m(!1),T()},3e4);return()=>clearInterval(n)},[t,m,T]),i.useEffect(()=>{if(!s){u("/auth");return}if(!(s.email?.includes("admin")||s.role==="admin"||s.email==="mario@capsulecorp.com")){u("/");return}},[s,u]);const M=N.filter(n=>n.order_number?.toLowerCase().includes(g.toLowerCase())||n.customer_name?.toLowerCase().includes(g.toLowerCase())||n.customer_email?.toLowerCase().includes(g.toLowerCase())),Y=n=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[n]||"bg-gray-100 text-gray-800",ie=async(n,k)=>{try{await A(`/api/orders/${n}/status`,{method:"PATCH",headers:{"x-user-email":s?.email,"x-user-id":s?.id},body:JSON.stringify({status:k})}),b(N.map(F=>F.id===n?{...F,status:k}:F)),a(`Order status updated to ${k}`),T()}catch(F){console.error("Error updating status:",F),x("Failed to update order status")}},oe=async n=>{try{const k=await A(`/api/orders/${n.id}`,{headers:{"x-user-email":s?.email}});k.order&&(c(k.order),O({tracking_number:k.order.tracking_number||"",carrier:k.order.carrier||""}),K(k.order.admin_notes||""),_(!0))}catch(k){console.error("Error fetching order details:",k),x("Failed to load order details")}},ce=async()=>{if(!p||!R.tracking_number){x("Please enter tracking number");return}try{await A(`/api/orders/${p.id}/tracking`,{method:"PATCH",headers:{"x-user-email":s?.email},body:JSON.stringify(R)}),a("Tracking information updated"),m(!1),_(!1)}catch(n){console.error("Error updating tracking:",n),x("Failed to update tracking")}},de=async()=>{if(p)try{await A(`/api/orders/${p.id}/notes`,{method:"PATCH",headers:{"x-user-email":s?.email},body:JSON.stringify({notes:G})}),a("Admin notes updated"),m(!1)}catch(n){console.error("Error updating notes:",n),x("Failed to update notes")}},xe=()=>{m(!1),T(),a("Orders refreshed")},B=f||{total_orders:N.length,total_revenue:N.reduce((n,k)=>n+parseFloat(k.total||0),0),pending_orders:N.filter(n=>n.status==="pending").length,delivered_orders:N.filter(n=>n.status==="delivered").length},me=Number(B.total_orders)||0,ue=Number(B.total_revenue)||0,ge=Number(B.pending_orders)||0,he=Number(B.delivered_orders)||0;return!s||C?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-saiyan",children:"LOADING ORDERS..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50",children:[e.jsx("header",{className:"bg-gradient-to-r from-[#3B4CCA] to-blue-600 shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>u("/admin"),className:"text-white hover:text-[#FFD700] transition-colors",children:e.jsx(H,{className:"text-xl"})}),e.jsx("h1",{className:"text-2xl font-bold text-white font-saiyan",children:"ORDER MANAGEMENT"}),l&&e.jsx(Z,{className:"text-white animate-spin"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-white text-sm",children:[e.jsx("input",{type:"checkbox",checked:t,onChange:n=>w(n.target.checked),className:"rounded"}),e.jsx("span",{children:"Auto-refresh (30s)"})]}),e.jsxs("button",{onClick:xe,disabled:l,className:"bg-white text-blue-600 px-4 py-2 rounded-lg font-saiyan font-bold hover:scale-105 transition-all flex items-center space-x-2 disabled:opacity-50",children:[e.jsx(Z,{className:l?"animate-spin":""}),e.jsx("span",{children:"REFRESH"})]}),e.jsxs("button",{onClick:()=>console.log("Export orders"),className:"bg-gradient-to-r from-orange-400 to-orange-600 text-white px-6 py-2 rounded-lg font-saiyan font-bold hover:scale-105 transition-all flex items-center space-x-2",children:[e.jsx(Q,{}),e.jsx("span",{children:"EXPORT"})]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 font-saiyan",children:me})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(z,{className:"text-blue-600 text-xl"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600 font-saiyan",children:["$",ue.toLocaleString()]})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx("span",{className:"text-green-600 text-xl",children:"$"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Orders"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600 font-saiyan",children:ge})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:e.jsx("span",{className:"text-yellow-600 text-xl",children:"⏳"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Delivered Orders"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 font-saiyan",children:he})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx("span",{className:"text-green-600 text-xl",children:"✓"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by order ID, customer name, or email...",value:g,onChange:n=>y(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("select",{value:d,onChange:n=>h(n.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("select",{value:o,onChange:n=>j(n.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",M.length," of ",N.length," orders"]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(n=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 font-saiyan",children:n.order_number}),e.jsx("div",{className:"text-sm text-gray-500",children:n.payment_method})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:n.customer_name}),e.jsx("div",{className:"text-sm text-gray-500",children:n.customer_email})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[new Date(n.created_at).toLocaleDateString(),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(n.created_at).toLocaleTimeString()})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:n.status,onChange:k=>ie(n.id,k.target.value),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y(n.status)} border-none focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[n.item_count||0," items"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-saiyan",children:e.jsx(P,{value:parseFloat(n.total||0)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>oe(n),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(z,{})}),e.jsx("button",{onClick:()=>{c(n),O({tracking_number:n.tracking_number||"",carrier:n.carrier||""}),_(!0)},className:"text-purple-600 hover:text-purple-900",title:"Add Tracking",children:e.jsx(X,{})}),e.jsx("button",{onClick:()=>console.log("Download invoice:",n.order_number),className:"text-green-600 hover:text-green-900",title:"Download Invoice",children:e.jsx(Q,{})})]})})]},n.id))})]})})}),M.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Se,{className:"text-6xl text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 font-saiyan mb-2",children:"No orders found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria"})]})]}),E&&p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#3B4CCA] to-blue-600 p-6 rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white font-saiyan",children:"ORDER DETAILS"}),e.jsx("button",{onClick:()=>_(!1),className:"text-white hover:text-[#FFD700] transition-colors text-2xl",children:"×"})]}),e.jsx("p",{className:"text-white mt-2",children:p.order_number})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 font-saiyan mb-3",children:"Customer Information"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Name:"})," ",p.customer_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",p.customer_email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",p.customer_phone||"N/A"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 font-saiyan mb-3",children:"Shipping Address"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{children:p.shipping_address_line1}),p.shipping_address_line2&&e.jsx("p",{children:p.shipping_address_line2}),e.jsxs("p",{children:[p.shipping_city,", ",p.shipping_state," ",p.shipping_zip]}),e.jsx("p",{children:p.shipping_country})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 font-saiyan mb-3",children:"Tracking Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tracking Number"}),e.jsx("input",{type:"text",value:R.tracking_number,onChange:n=>O({...R,tracking_number:n.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter tracking number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Carrier"}),e.jsx("input",{type:"text",value:R.carrier,onChange:n=>O({...R,carrier:n.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., UPS, FedEx, DHL"})]}),e.jsxs("button",{onClick:ce,className:"w-full bg-gradient-to-r from-purple-400 to-purple-600 text-white px-6 py-2 rounded-lg font-saiyan font-bold hover:scale-105 transition-all flex items-center justify-center space-x-2",children:[e.jsx(X,{}),e.jsx("span",{children:"UPDATE TRACKING"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 font-saiyan mb-3",children:"Admin Notes"}),e.jsx("textarea",{value:G,onChange:n=>K(n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-32",placeholder:"Add internal notes about this order..."}),e.jsxs("button",{onClick:de,className:"mt-2 w-full bg-gradient-to-r from-blue-400 to-blue-600 text-white px-6 py-2 rounded-lg font-saiyan font-bold hover:scale-105 transition-all flex items-center justify-center space-x-2",children:[e.jsx(ke,{}),e.jsx("span",{children:"SAVE NOTES"})]})]}),p.items&&p.items.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 font-saiyan mb-3",children:"Order Items"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:p.items.map((n,k)=>e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[n.product_image&&e.jsx("img",{src:n.product_image,alt:n.product_name,className:"w-12 h-12 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:n.product_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",n.quantity]})]})]}),e.jsx("p",{className:"font-bold",children:e.jsx(P,{value:parseFloat(n.subtotal)})})]},k))})]}),e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold font-saiyan",children:"TOTAL:"}),e.jsx("span",{className:"text-2xl font-bold text-orange-600 font-saiyan",children:e.jsx(P,{value:parseFloat(p.total)})})]})})]})]})})]})}const tt=Object.freeze(Object.defineProperty({__proto__:null,default:Ke},Symbol.toStringTag,{value:"Module"}));function Ve(){const{user:s}=q(),u=J(),[a,x]=i.useState([]),[N,b]=i.useState(""),[f,S]=i.useState("all"),[g,y]=i.useState("all");i.useEffect(()=>{x([{id:1,name:"Goku Son",email:"goku@dragonball.com",role:"customer",status:"active",joinDate:"2023-06-15",lastLogin:"2024-01-15",orders:12,totalSpent:2450,avatar:"https://res.cloudinary.com/dz4nqmtfp/image/upload/v1737024566/goku-avatar_pxvhdf.jpg"},{id:2,name:"Vegeta Prince",email:"vegeta@saiyans.com",role:"premium",status:"active",joinDate:"2023-08-20",lastLogin:"2024-01-14",orders:8,totalSpent:3200,avatar:"https://res.cloudinary.com/dz4nqmtfp/image/upload/v1737024566/vegeta-avatar_kmqrpd.jpg"},{id:3,name:"Piccolo Namekian",email:"piccolo@namek.com",role:"customer",status:"active",joinDate:"2023-09-10",lastLogin:"2024-01-13",orders:5,totalSpent:1150,avatar:"https://res.cloudinary.com/dz4nqmtfp/image/upload/v1737024566/piccolo-avatar_hztqmn.jpg"},{id:4,name:"Mario Capsule",email:"mario@capsulecorp.com",role:"admin",status:"active",joinDate:"2023-01-01",lastLogin:"2024-01-16",orders:0,totalSpent:0,avatar:"https://res.cloudinary.com/dz4nqmtfp/image/upload/v1737024566/admin-avatar_pqwxrf.jpg"},{id:5,name:"Trunks Briefs",email:"trunks@capsulecorp.com",role:"customer",status:"inactive",joinDate:"2023-11-05",lastLogin:"2023-12-20",orders:3,totalSpent:850,avatar:"https://res.cloudinary.com/dz4nqmtfp/image/upload/v1737024566/trunks-avatar_mxbqhk.jpg"},{id:6,name:"Gohan Son",email:"gohan@orangestar.edu",role:"customer",status:"suspended",joinDate:"2023-10-15",lastLogin:"2024-01-05",orders:2,totalSpent:450,avatar:"https://res.cloudinary.com/dz4nqmtfp/image/upload/v1737024566/gohan-avatar_nqrmhx.jpg"}])},[]),i.useEffect(()=>{if(!s){u("/auth");return}if(!(s.email?.includes("admin")||s.role==="admin"||s.email==="mario@capsulecorp.com")){u("/");return}},[s,u]);const d=a.filter(c=>{const E=c.name.toLowerCase().includes(N.toLowerCase())||c.email.toLowerCase().includes(N.toLowerCase()),_=f==="all"||c.role===f,R=g==="all"||c.status===g;return E&&_&&R}),h=c=>({admin:"bg-red-100 text-red-800",premium:"bg-purple-100 text-purple-800",customer:"bg-blue-100 text-blue-800"})[c]||"bg-gray-100 text-gray-800",o=c=>({active:"bg-green-100 text-green-800",inactive:"bg-yellow-100 text-yellow-800",suspended:"bg-red-100 text-red-800"})[c]||"bg-gray-100 text-gray-800",j=(c,E)=>{x(a.map(_=>_.id===c?{..._,status:E}:_))},C=(c,E)=>{x(a.map(_=>_.id===c?{..._,role:E}:_))},r=a.length,l=a.filter(c=>c.status==="active").length,v=a.filter(c=>c.role==="premium").length,p=a.filter(c=>c.status==="suspended").length;return s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50",children:[e.jsx("header",{className:"bg-gradient-to-r from-[#3B4CCA] to-blue-600 shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>u("/admin"),className:"text-white hover:text-[#FFD700] transition-colors",children:e.jsx(H,{className:"text-xl"})}),e.jsx("h1",{className:"text-2xl font-bold text-white font-saiyan",children:"USER MANAGEMENT"})]}),e.jsxs("button",{onClick:()=>console.log("Export users"),className:"bg-gradient-to-r from-orange-400 to-orange-600 text-white px-6 py-2 rounded-lg font-saiyan font-bold hover:scale-105 transition-all flex items-center space-x-2",children:[e.jsx(V,{}),e.jsx("span",{children:"EXPORT USERS"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 font-saiyan",children:r})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(V,{className:"text-blue-600 text-xl"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 font-saiyan",children:l})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx("span",{className:"text-green-600 text-xl",children:"✓"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Premium Users"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 font-saiyan",children:v})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx("span",{className:"text-purple-600 text-xl",children:"⭐"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspended"}),e.jsx("p",{className:"text-3xl font-bold text-red-600 font-saiyan",children:p})]}),e.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:e.jsx(ee,{className:"text-red-600 text-xl"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:N,onChange:c=>b(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("select",{value:f,onChange:c=>S(c.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"premium",children:"Premium"}),e.jsx("option",{value:"customer",children:"Customer"})]}),e.jsxs("select",{value:g,onChange:c=>y(c.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",d.length," of ",a.length," users"]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Join Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Spent"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(c=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:e.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:c.avatar,alt:c.name,onError:E=>{E.target.src="/api/placeholder/48/48"}})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 font-saiyan",children:c.name}),e.jsx("div",{className:"text-sm text-gray-500",children:c.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:c.role,onChange:E=>C(c.id,E.target.value),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h(c.role)} border-none focus:outline-none focus:ring-2 focus:ring-blue-500`,disabled:c.email==="mario@capsulecorp.com",children:[e.jsx("option",{value:"customer",children:"Customer"}),e.jsx("option",{value:"premium",children:"Premium"}),e.jsx("option",{value:"admin",children:"Admin"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:c.status,onChange:E=>j(c.id,E.target.value),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o(c.status)} border-none focus:outline-none focus:ring-2 focus:ring-blue-500`,disabled:c.email==="mario@capsulecorp.com",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(c.joinDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.orders}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-saiyan",children:e.jsx(P,{value:c.totalSpent})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>console.log("View user profile:",c.id),className:"text-blue-600 hover:text-blue-900",title:"View Profile",children:e.jsx(z,{})}),e.jsx("button",{onClick:()=>console.log("Edit user:",c.id),className:"text-orange-600 hover:text-orange-900",title:"Edit User",children:e.jsx(ae,{})}),c.email!=="mario@capsulecorp.com"&&e.jsx("button",{onClick:()=>j(c.id,c.status==="suspended"?"active":"suspended"),className:`${c.status==="suspended"?"text-green-600 hover:text-green-900":"text-red-600 hover:text-red-900"}`,title:c.status==="suspended"?"Activate User":"Suspend User",children:e.jsx(ee,{})})]})})]},c.id))})]})})}),d.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(V,{className:"text-6xl text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 font-saiyan mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria"})]})]})]}):e.jsx("div",{children:"Loading..."})}const st=Object.freeze(Object.defineProperty({__proto__:null,default:Ve},Symbol.toStringTag,{value:"Module"}));export{We as A,Qe as C,Ze as N,P,q as a,A as b,L as c,Be as d,Xe as e,et as f,te as g,tt as h,st as i,Me as u};
