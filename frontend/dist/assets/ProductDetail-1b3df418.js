import{J as $,K as D,c as I,d as U,e as j,r as l,a as t,j as a,L as B,M as K,k as M,P as g,N as W,O as Q,F as q,g as z,Q as G,R as H,f as y}from"./index-5c3016fd.js";import{I as J,P as V}from"./ProductCard-9b8fa873.js";function te(){var v;const{slug:h}=$(),i=D(),{user:p}=I(),{addToCart:k}=U(),{addToWishlist:w,removeFromWishlist:S,isInWishlist:u}=j(),[e,C]=l.useState(null),[x,P]=l.useState([]),[n,T]=l.useState(0),[Y,m]=l.useState(!1),[c,O]=l.useState(1),[d,E]=l.useState("description"),[F,f]=l.useState(!0),[X,b]=l.useState(null);l.useEffect(()=>{(async()=>{try{f(!0),b(null);const s=await y(`/api/products/slug/${h}`);if(s.product){C(s.product);const A=((await y(`/api/products?category=${encodeURIComponent(s.product.category)}&limit=5`)).products||[]).filter(L=>L.id!==s.product.id).slice(0,4);P(A)}else i("/products")}catch(s){console.error("Error fetching product:",s),b("Product not found"),i("/products")}finally{f(!1)}})()},[h,i]),l.useEffect(()=>{var o;if(!e)return;const r=((o=e.gallery)==null?void 0:o[n])||e.image;m(!1);const s=new Image;return s.src=r,s.onload=()=>m(!0),s.onerror=()=>m(!1),()=>{s.onload=null,s.onerror=null}},[e,n]);const R=()=>{e&&(e.inStock||e.in_stock||e.stock>0)&&k(e,c)},_=()=>{e&&(u(e.id)?S(e.id):w(e))},N=r=>{O(s=>Math.max(1,Math.min(e.stock,s+r)))};return F?t("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 overflow-x-hidden",children:t("div",{className:"max-w-6xl mx-auto px-4 py-16 p-4",children:a("div",{className:"text-center",children:[t("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-orange-500 mx-auto mb-4"}),t("p",{className:"text-gray-600 font-saiyan",children:"Loading product..."})]})})}):e?t("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50",children:a("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a("button",{onClick:()=>i(-1),className:"flex items-center space-x-2 text-blue-600 hover:text-orange-600 transition-colors mb-6 font-saiyan",children:[t(K,{}),t("span",{children:"BACK TO PRODUCTS"})]}),a("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-12",children:[a("div",{className:"space-y-4",children:[a("div",{className:"relative",children:[e&&t(J,{src:((v=e.gallery)==null?void 0:v[n])||e.image,alt:e.name,className:"aspect-square shadow-xl",overlayText:e.name}),!(e.inStock||e.in_stock||e.stock>0)&&t("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-4 py-2 rounded-full font-bold shadow-lg",children:"OUT OF STOCK"}),(e.featured||e.is_featured)&&t("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-orange-400 to-orange-600 text-white px-4 py-2 rounded-full font-bold kamehameha-glow",children:"LEGENDARY ITEM"})]}),e.gallery&&e.gallery.length>1&&t("div",{className:"flex space-x-2 overflow-x-auto",children:e.gallery.map((r,s)=>t("button",{onClick:()=>T(s),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${n===s?"border-orange-500 scale-105":"border-gray-200 hover:border-blue-400"}`,children:t("img",{src:r,alt:`${e.name} view ${s+1}`,className:"w-full h-full object-cover",onError:o=>{o.target.src="/api/placeholder/80/80"}})},s))})]}),a("div",{className:"space-y-6",children:[t("div",{children:t("span",{className:"inline-block bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm font-semibold",children:e.category})}),t("h1",{className:"text-4xl font-bold text-gray-800 font-saiyan",children:e.name}),a("div",{className:"flex items-center space-x-2",children:[t(M,{className:"text-yellow-400 text-xl"}),a("span",{className:"text-lg text-gray-700",children:["Power Level: ",t("span",{className:"font-bold text-orange-600",children:Number(e.powerLevel||e.power_level||0).toLocaleString()})]})]}),e.tags&&e.tags.length>0&&t("div",{className:"flex flex-wrap gap-2",children:e.tags.map((r,s)=>t("span",{className:"bg-orange-100 text-orange-600 px-3 py-1 rounded-full text-sm font-medium",children:r},s))}),a("div",{className:"flex items-center space-x-4",children:[(e.originalPrice||e.original_price)&&t("span",{className:"text-2xl text-gray-400 line-through",children:t(g,{value:e.originalPrice||e.original_price})}),t("span",{className:"text-4xl font-bold text-orange-600 font-saiyan",children:t(g,{value:e.price})}),(e.originalPrice||e.original_price)&&a("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:["SAVE ",t(g,{value:parseFloat(e.originalPrice||e.original_price)-parseFloat(e.price)})]})]}),a("div",{className:"flex items-center space-x-2",children:[t("div",{className:`w-3 h-3 rounded-full ${e.inStock||e.in_stock||e.stock>0?"bg-green-500":"bg-red-500"}`}),t("span",{className:`font-medium ${e.inStock||e.in_stock||e.stock>0?"text-green-600":"text-red-600"}`,children:e.inStock||e.in_stock||e.stock>0?e.stock<=5?`Only ${e.stock} left in stock!`:"In Stock":"Out of Stock"})]}),(e.inStock||e.in_stock||e.stock>0)&&a("div",{className:"flex items-center space-x-4",children:[t("span",{className:"text-lg font-medium text-gray-700",children:"Quantity:"}),a("div",{className:"flex items-center border-2 border-gray-300 rounded-lg",children:[t("button",{onClick:()=>N(-1),disabled:c<=1,className:"p-2 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:t(W,{})}),t("span",{className:"px-4 py-2 min-w-[3rem] text-center font-bold",children:c}),t("button",{onClick:()=>N(1),disabled:c>=e.stock,className:"p-2 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:t(Q,{})})]})]}),a("div",{className:"flex space-x-4",children:[a("button",{onClick:R,disabled:!(e.inStock||e.in_stock||e.stock>0),className:`flex-1 flex items-center justify-center px-8 py-4 rounded-xl font-saiyan font-bold text-lg transition-all ${e.inStock||e.in_stock||e.stock>0?"bg-gradient-to-r from-orange-400 to-orange-600 text-white kamehameha-glow hover:scale-105 hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[t(q,{className:"mr-3"}),e.inStock||e.in_stock||e.stock>0?"ADD TO CAPSULE":"OUT OF STOCK"]}),t("button",{onClick:_,className:`px-6 py-4 rounded-xl border-2 transition-all ${u(e.id)?"bg-red-500 text-white border-red-500":"bg-white text-gray-700 border-gray-300 hover:border-red-500 hover:text-red-500"} ${p?"":"opacity-50 cursor-not-allowed"}`,disabled:!p,children:t(z,{className:"text-xl"})})]}),a("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[a("div",{className:"flex items-center space-x-2 text-green-600",children:[t(G,{}),t("span",{className:"text-sm",children:"Battle Tested"})]}),a("div",{className:"flex items-center space-x-2 text-blue-600",children:[t(H,{}),t("span",{className:"text-sm",children:"Energy Efficient"})]})]})]})]}),a("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-12",children:[t("div",{className:"border-b",children:t("nav",{className:"flex",children:[{id:"description",label:"Description"},{id:"specifications",label:"Specifications"},{id:"reviews",label:"Reviews"}].map(r=>t("button",{onClick:()=>E(r.id),className:`px-8 py-4 font-saiyan font-bold transition-colors ${d===r.id?"bg-gradient-to-r from-orange-400 to-orange-600 text-white":"text-gray-600 hover:text-orange-600"}`,children:r.label},r.id))})}),a("div",{className:"p-8",children:[d==="description"&&t("div",{className:"prose max-w-none",children:t("p",{className:"text-lg text-gray-700 leading-relaxed",children:e.description})}),d==="specifications"&&e.specifications&&t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(e.specifications).map(([r,s])=>a("div",{className:"flex justify-between items-center py-3 border-b border-gray-200",children:[a("span",{className:"font-medium text-gray-700",children:[r,":"]}),t("span",{className:"font-bold text-orange-600",children:s})]},r))}),d==="reviews"&&t("div",{className:"text-center py-12",children:t("p",{className:"text-gray-600 text-lg",children:"Reviews coming soon! Battle-test this item and share your experience."})})]})]}),x.length>0&&a("div",{children:[t("h2",{className:"text-3xl font-bold text-gray-800 font-saiyan mb-8",children:"RELATED CAPSULES"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x.map(r=>t(V,{product:r,size:"medium"},r.id))})]})]})}):t("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50",children:t("div",{className:"max-w-6xl mx-auto px-4 py-16",children:a("div",{className:"text-center",children:[t("h1",{className:"text-4xl font-bold text-gray-800 mb-4 font-saiyan",children:"PRODUCT NOT FOUND"}),t("p",{className:"text-gray-600 mb-8",children:"The product you're looking for doesn't exist in our capsule inventory."}),t(B,{to:"/products",className:"inline-block bg-gradient-to-r from-orange-400 to-orange-600 text-white px-8 py-3 rounded-xl font-saiyan font-bold kamehameha-glow transition-all hover:scale-105",children:"BACK TO PRODUCTS"})]})})})}export{te as default};
