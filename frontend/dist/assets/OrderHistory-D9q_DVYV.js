import{l as S,u as $,r as l,U as A,j as e,ad as m,k as O,L as k,P as n,a6 as E,an as j,aC as y,Z as F,y as T,a3 as D}from"./index-C_rhaFlX.js";const I=()=>{const{user:c}=S(),{isDarkMode:t}=$(),[u,x]=l.useState([]),[p,o]=l.useState([]),[i,f]=l.useState(""),[d,N]=l.useState("all"),[a,h]=l.useState(null),[v,b]=l.useState(!0);l.useEffect(()=>{if(!c||!c.id){b(!1);return}(async()=>{try{const s=await A(`/api/orders/user/${c.id}`);s&&s.success&&Array.isArray(s.orders)?(x(s.orders),o(s.orders)):(x([]),o([]))}catch(s){console.error("Error loading orders",s),x([]),o([])}finally{b(!1)}})()},[c]),l.useEffect(()=>{let s=u;i&&(s=s.filter(r=>r.id.toLowerCase().includes(i.toLowerCase())||r.items&&r.items.some(g=>g.name.toLowerCase().includes(i.toLowerCase())))),d!=="all"&&(s=s.filter(r=>r.status===d)),o(s)},[i,d,u]);const w=s=>{switch(s){case"delivered":return e.jsx(D,{className:"text-green-500"});case"shipped":return e.jsx(j,{className:"text-blue-500"});case"processing":return e.jsx(T,{className:"text-orange-500"});case"cancelled":return e.jsx(y,{className:"text-red-500"});default:return e.jsx(m,{className:"text-gray-500"})}},C=s=>{switch(s){case"delivered":return"bg-green-100 text-green-800 border-green-200";case"shipped":return"bg-blue-100 text-blue-800 border-blue-200";case"processing":return"bg-orange-100 text-orange-800 border-orange-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return v?e.jsx("div",{className:`min-h-screen py-8 ${t?"bg-gradient-to-br from-slate-900 to-slate-800":"bg-gradient-to-br from-blue-50 to-orange-50"}`,children:e.jsx("div",{className:"max-w-6xl mx-auto px-4",children:e.jsx("div",{className:`rounded-2xl shadow-2xl p-8 text-center ${t?"bg-slate-800 border border-slate-700":"bg-white border border-blue-100"}`,children:e.jsx("div",{className:"animate-pulse",children:"Loading orders..."})})})}):e.jsxs("div",{className:`min-h-screen py-8 ${t?"bg-gradient-to-br from-slate-900 to-slate-800":"bg-gradient-to-br from-blue-50 to-orange-50"}`,children:[e.jsx("div",{className:"max-w-6xl mx-auto px-4",children:e.jsxs("div",{className:`rounded-2xl shadow-2xl overflow-hidden ${t?"bg-slate-800 border border-slate-700":"bg-white border border-blue-100"}`,children:[e.jsx("div",{className:"bg-gradient-to-r from-[#3B4CCA] to-blue-600 px-8 py-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#FF9E00] to-[#FF9E00] rounded-full flex items-center justify-center border-4 border-white shadow-lg",children:e.jsx(m,{className:"text-[#3B4CCA] text-2xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white font-saiyan",children:"ORDER HISTORY"}),e.jsx("p",{className:"text-blue-100",children:"Track and manage your Capsule Corp orders"})]})]})}),e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-slate-600",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("input",{type:"text",value:i,onChange:s=>f(s.target.value),placeholder:"Search orders or products...",className:`w-full px-4 py-3 pl-12 rounded-lg border-2 transition-all ${t?"bg-slate-700 border-slate-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500`}),e.jsx(O,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"})]}),e.jsxs("select",{value:d,onChange:s=>N(s.target.value),className:`px-4 py-3 rounded-lg border-2 transition-all ${t?"bg-slate-700 border-slate-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"all",children:"All Orders"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx("div",{className:"p-6",children:p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(m,{className:`text-6xl mx-auto mb-4 ${t?"text-gray-600":"text-gray-300"}`}),e.jsx("h3",{className:`text-xl font-bold mb-2 font-saiyan ${t?"text-gray-400":"text-gray-500"}`,children:"NO ORDERS FOUND"}),e.jsx("p",{className:`${t?"text-gray-500":"text-gray-400"} mb-6`,children:i||d!=="all"?"Try adjusting your search or filters":"Start shopping to see your orders here"}),e.jsx(k,{to:"/products",className:"inline-block px-6 py-3 bg-gradient-to-r from-[#3B4CCA] to-blue-600 text-white rounded-lg hover:from-[#2A3B9A] hover:to-blue-700 transition-all font-saiyan font-bold",children:"START SHOPPING"})]}):e.jsx("div",{className:"space-y-6",children:p.map(s=>e.jsxs("div",{className:`rounded-xl border-2 transition-all ${t?"border-slate-600 bg-slate-700 hover:border-slate-500":"border-gray-200 bg-white hover:border-gray-300"}`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-slate-600",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-bold font-saiyan ${t?"text-white":"text-[#3B4CCA]"}`,children:s.id}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:["Ordered on ",new Date(s.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold border ${C(s.status)}`,children:e.jsxs("div",{className:"flex items-center space-x-1",children:[w(s.status),e.jsx("span",{children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Total"}),e.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-[#3B4CCA]"}`,children:e.jsx(n,{value:s.total})})]})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"space-y-4",children:s.items&&s.items.map(r=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200",onError:g=>{g.target.src="/placeholder-image.jpg"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:r.name}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:["Quantity: ",r.quantity," × ",e.jsx(n,{value:r.price})]})]}),e.jsx("div",{className:`text-right font-semibold ${t?"text-white":"text-gray-900"}`,children:e.jsx(n,{value:parseFloat(r.price)*r.quantity})})]},r.id))}),e.jsxs("div",{className:"mt-6 flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Shipping:"})," ",s.shipping?.address||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Method:"})," ",s.shipping?.method||"Standard"]}),s.shipping?.tracking&&e.jsxs("p",{children:[e.jsx("strong",{children:"Tracking:"})," ",s.shipping.tracking]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>h(s),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[#3B4CCA] to-blue-600 text-white rounded-lg hover:from-[#2A3B9A] hover:to-blue-700 transition-all font-saiyan text-sm",children:[e.jsx(E,{}),e.jsx("span",{children:"VIEW DETAILS"})]}),s.status==="shipped"&&e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all font-saiyan text-sm",children:[e.jsx(j,{}),e.jsx("span",{children:"TRACK ORDER"})]})]})]})]})]},s.id))})})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"order-history-details-title",onClick:()=>h(null),children:e.jsxs("div",{className:`max-w-2xl w-full rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto ${t?"bg-slate-800 border border-slate-700":"bg-white border border-blue-100"}`,onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-slate-600",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{id:"order-history-details-title",className:`text-2xl font-bold font-saiyan ${t?"text-white":"text-[#3B4CCA]"}`,children:"ORDER DETAILS"}),e.jsx("button",{onClick:()=>h(null),className:`text-2xl ${t?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(y,{})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold mb-2 font-saiyan ${t?"text-white":"text-gray-900"}`,children:"ORDER INFORMATION"}),e.jsxs("div",{className:`text-sm space-y-1 ${t?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Order ID:"})," ",a.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(a.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",a.status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total:"})," ",e.jsx(n,{value:a.total})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold mb-2 font-saiyan ${t?"text-white":"text-gray-900"}`,children:"ITEMS ORDERED"}),e.jsx("div",{className:"space-y-3",children:a.items&&a.items.map(s=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:F(s,80),alt:s.name,className:"w-12 h-12 object-cover rounded-lg",onError:r=>{r.target.src="/placeholder-image.jpg"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:s.name}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:[e.jsx(n,{value:parseFloat(s.price)})," × ",s.quantity]})]}),e.jsx("p",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:e.jsx(n,{value:parseFloat(s.price)*s.quantity})})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold mb-2 font-saiyan ${t?"text-white":"text-gray-900"}`,children:"SHIPPING INFORMATION"}),e.jsxs("div",{className:`text-sm space-y-1 ${t?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",a.shipping?.address||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Method:"})," ",a.shipping?.method||"Standard"]}),a.shipping?.tracking&&e.jsxs("p",{children:[e.jsx("strong",{children:"Tracking Number:"})," ",a.shipping.tracking]})]})]})]})})]})})]})};export{I as default};
