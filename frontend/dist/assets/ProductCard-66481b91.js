import{az as o,r as g,a,aA as N,c as k,d as w,e as u,j as s,L as p,g as S,V as C,F as T,f as _}from"./index-49c0c10e.js";import{P as f}from"./Price-0dab22b8.js";function b({src:r,alt:e,className:n="",overlayText:m=""}){const[c,i]=g.useState(!1);return g.useEffect(()=>{if(!r){i(!1);return}i(!1);const t=new Image;return t.src=r,t.onload=()=>i(!0),t.onerror=()=>i(!1),()=>{t.onload=null,t.onerror=null}},[r]),a("div",{className:`${n} bg-center bg-cover rounded-2xl overflow-hidden relative`,style:{backgroundImage:`url(${r})`},"aria-label":e,children:a("div",{className:`absolute inset-0 bg-gradient-to-br from-[#3B4CCA] to-blue-600 items-center justify-center z-40 ${c?"hidden":"flex"}`,children:a("span",{className:"text-white font-bold font-saiyan text-center text-2xl px-4",children:m})})})}b.propTypes={src:o.string,alt:o.string,className:o.string,overlayText:o.string};const P=N.memo(function({product:e,size:n="medium"}){const{user:m}=k(),{addToCart:c}=w(),{addToWishlist:i,removeFromWishlist:t,isInWishlist:d}=u(),v=l=>{l.preventDefault(),l.stopPropagation(),(e.stock>0||e.inStock||e.in_stock)&&c(e)},y=l=>{l.preventDefault(),l.stopPropagation(),d(e.id)?t(e.id):i(e)},h={small:"h-32",medium:"h-48",large:"h-64"};return s("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all hover:scale-105 border-2 border-transparent hover:border-orange-200 w-full max-w-sm mx-auto sm:max-w-none",children:[s(p,{to:`/product/${e.slug}`,className:"block",children:[s("div",{className:"relative",children:[a("div",{className:`w-full ${h[n]} flex items-center justify-center relative overflow-hidden`,children:a(b,{src:e.image,alt:e.name,className:`w-full ${h[n]}`,overlayText:e.name})}),(e.stock<=0||!e.inStock&&!e.in_stock)&&a("div",{className:"absolute top-3 left-3 bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold",children:"OUT OF STOCK"}),(e.featured||e.is_featured)&&a("div",{className:"absolute top-3 right-3 bg-gradient-to-r from-orange-400 to-orange-600 text-white px-3 py-1 rounded-full text-xs font-bold kamehameha-glow",children:"LEGENDARY"}),a("button",{onClick:y,className:`absolute top-3 right-3 p-2 rounded-full transition-all ${e.featured||e.is_featured?"top-12":""} ${d(e.id)?"bg-red-500 text-white":"bg-white/80 text-gray-600 hover:bg-red-500 hover:text-white"} ${m?"hover:scale-110":"opacity-50"}`,"aria-label":d(e.id)?"Remove from wishlist":"Add to wishlist",children:a(S,{className:"text-sm"})}),a("div",{className:"absolute inset-0 bg-black/20 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:s("div",{className:"bg-white/90 text-[#3B4CCA] px-4 py-2 rounded-lg font-saiyan font-bold flex items-center space-x-2",children:[a(C,{}),a("span",{children:"VIEW DETAILS"})]})})]}),s("div",{className:"p-3 sm:p-4",children:[a("div",{className:"mb-2",children:a("span",{className:"text-xs font-semibold text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:e.category})}),a("h3",{className:`${n==="small"?"text-sm":"text-base sm:text-lg"} font-bold text-gray-800 mb-2 font-saiyan line-clamp-2`,children:e.name}),s("div",{className:"flex items-center mb-3",children:[a(T,{className:"text-yellow-400 mr-1"}),s("span",{className:"text-xs sm:text-sm text-gray-600",children:["Power Level: ",Number(e.powerLevel||e.power_level||0).toLocaleString()]})]}),e.tags&&e.tags.length>0&&a("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.slice(0,2).map((l,x)=>a("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded-full font-medium",children:l},x))}),s("div",{className:"flex items-center justify-between mb-4",children:[s("div",{children:[(e.originalPrice||e.original_price)&&a("span",{className:"text-xs sm:text-sm text-gray-400 line-through mr-2",children:a(f,{value:e.originalPrice||e.original_price})}),a("span",{className:`${n==="small"?"text-base":"text-lg sm:text-xl"} font-bold text-orange-600 font-saiyan`,children:a(f,{value:e.price})})]}),e.stock<=5&&(e.inStock||e.in_stock||e.stock>0)&&s("span",{className:"text-xs text-red-500 font-medium hidden sm:inline",children:["Only ",e.stock," left!"]})]})]})]}),a("div",{className:"px-3 sm:px-4 pb-3 sm:pb-4",children:s("button",{onClick:v,disabled:!(e.inStock||e.in_stock||e.stock>0),className:`w-full flex items-center justify-center px-3 sm:px-4 py-2 sm:py-3 rounded-xl font-saiyan font-bold text-xs sm:text-sm transition-all touch-target ${e.inStock||e.in_stock||e.stock>0?"bg-gradient-to-r from-orange-400 to-orange-600 text-white kamehameha-glow hover:scale-105 hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[a(_,{className:"mr-1 sm:mr-2"}),a("span",{className:"hidden sm:inline",children:e.inStock||e.in_stock||e.stock>0?"ADD TO CAPSULE":"OUT OF STOCK"}),a("span",{className:"sm:hidden",children:e.inStock||e.in_stock||e.stock>0?"ADD":"OUT"})]})})]})}),O=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}));export{b as I,P,O as a};
