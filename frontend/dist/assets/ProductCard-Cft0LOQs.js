import{r as h,j as s,aE as r,aF as f,b as k,d as w,e as S,L as p,N as y,V as T,h as _,P as x,M as C}from"./index-CPlhvEIb.js";function u({src:n,alt:e,className:l="",overlayText:o=""}){const[c,a]=h.useState(!1);return h.useEffect(()=>{if(!n){a(!1);return}a(!1);const i=new Image;return i.src=n,i.onload=()=>a(!0),i.onerror=()=>a(!1),()=>{i.onload=null,i.onerror=null}},[n]),s.jsxs("div",{className:`${l} bg-center bg-cover rounded-2xl overflow-hidden relative`,"aria-label":e,children:[n?s.jsx("img",{src:n,alt:e,className:"w-full h-full object-contain",loading:"lazy",onLoad:()=>a(!0),onError:()=>a(!1),style:{display:c?"block":"none"}}):null,!c&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#3B4CCA] to-blue-600 items-center justify-center z-40 flex",children:s.jsx("span",{className:"text-white font-bold font-saiyan text-center text-2xl px-4",children:o})})]})}u.propTypes={src:r.string,alt:r.string,className:r.string,overlayText:r.string};const P=f.memo(function({product:e,size:l="medium"}){const{user:o}=k(),{addToCart:c}=w(),{addToWishlist:a,removeFromWishlist:i,isInWishlist:m}=S(),j=t=>{t.preventDefault(),t.stopPropagation(),(e.stock>0||e.inStock||e.in_stock)&&c(e)},b=t=>{t.preventDefault(),t.stopPropagation(),m(e.id)?i(e.id):a(e)},d={small:"product-image-small",medium:"product-image-medium",large:"product-image-large"},v={small:"product-name product-name-small",medium:"product-name product-name-medium",large:"product-name product-name-large"},N={small:"current-price current-price-small",medium:"current-price current-price-medium",large:"current-price current-price-large"};return s.jsxs("div",{className:"product-card",children:[s.jsx(p,{to:`/product/${e.slug}`,className:"product-card-link",children:s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:`product-image-container ${d[l]}`,children:[s.jsx(u,{src:e.image,alt:e.name,className:`w-full ${d[l]}`,overlayText:e.name}),(e.stock<=0||!e.inStock&&!e.in_stock)&&s.jsx("div",{className:"status-badge status-badge-out-of-stock",children:"OUT OF STOCK"}),(e.featured||e.is_featured)&&s.jsx("div",{className:"status-badge status-badge-featured kamehameha-glow",children:"LEGENDARY"}),s.jsx("button",{onClick:b,className:`wishlist-button ${e.featured||e.is_featured?"wishlist-button-featured":""} ${m(e.id)?"wishlist-button-active":"wishlist-button-inactive"} ${o?"":"wishlist-button-disabled"}`,"aria-label":m(e.id)?"Remove from wishlist":"Add to wishlist",children:s.jsx(y,{className:"text-sm"})}),s.jsx("div",{className:"quick-view-overlay",children:s.jsxs("div",{className:"quick-view-button",children:[s.jsx(T,{}),s.jsx("span",{children:"VIEW DETAILS"})]})})]}),s.jsxs("div",{className:"product-info",children:[s.jsx("div",{className:"mb-2",children:s.jsx("span",{className:"category-badge",children:e.category})}),s.jsx("h3",{className:`${v[l]} line-clamp-2`,children:e.name}),s.jsxs("div",{className:"power-level",children:[s.jsx(_,{className:"power-level-icon"}),s.jsxs("span",{className:"power-level-text",children:["Power Level: ",Number(e.powerLevel||e.power_level||0).toLocaleString()]})]}),e.tags&&e.tags.length>0&&s.jsx("div",{className:"product-tags",children:e.tags.slice(0,2).map((t,g)=>s.jsx("span",{className:"product-tag",children:t},g))}),s.jsxs("div",{className:"price-section",children:[s.jsxs("div",{className:"price-container",children:[(e.originalPrice||e.original_price)&&s.jsx("span",{className:"original-price",children:s.jsx(x,{value:e.originalPrice||e.original_price})}),s.jsx("span",{className:N[l],children:s.jsx(x,{value:e.price})})]}),e.stock<=5&&(e.inStock||e.in_stock||e.stock>0)&&s.jsxs("span",{className:"stock-warning",children:["Only ",e.stock," left!"]})]})]})]})}),s.jsx("div",{className:"action-button-container",children:s.jsxs("button",{onClick:j,disabled:!(e.inStock||e.in_stock||e.stock>0),className:`action-button touch-target ${e.inStock||e.in_stock||e.stock>0?"action-button-enabled":"action-button-disabled"}`,children:[s.jsx(C,{className:"action-button-icon"}),s.jsx("span",{className:"action-button-text-desktop",children:e.inStock||e.in_stock||e.stock>0?"ADD TO CAPSULE":"OUT OF STOCK"}),s.jsx("span",{className:"action-button-text-mobile",children:e.inStock||e.in_stock||e.stock>0?"ADD":"OUT"})]})})]})}),O=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}));export{u as I,P,O as a};
