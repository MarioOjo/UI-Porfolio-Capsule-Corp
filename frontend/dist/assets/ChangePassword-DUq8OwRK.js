import{b as S,o as k,r as i,j as e,ac as A,at as h,V as w,a9 as o,an as c}from"./index-87IgoN6I.js";const D=()=>{const{changePassword:j}=S(),{showSuccess:y,showError:l}=k(),[x,g]=i.useState(!1),[s,f]=i.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[a,N]=i.useState({current:!1,new:!1,confirm:!1}),[n,p]=i.useState(0),m=r=>{const{name:t,value:d}=r.target;f({...s,[t]:d}),t==="newPassword"&&P(d)},P=r=>{let t=0;r.length>=8&&t++,r.length>=12&&t++,/[a-z]/.test(r)&&/[A-Z]/.test(r)&&t++,/\d/.test(r)&&t++,/[!@#$%^&*(),.?":{}|<>]/.test(r)&&t++,p(t)},v=()=>n===0?{text:"Too Weak",color:"text-red-600"}:n<=2?{text:"Weak",color:"text-orange-600"}:n<=3?{text:"Fair",color:"text-yellow-600"}:n<=4?{text:"Good",color:"text-blue-600"}:{text:"Strong",color:"text-green-600"},C=async r=>{if(r.preventDefault(),!s.currentPassword||!s.newPassword||!s.confirmPassword){l("‚ùå Please fill in all fields");return}if(s.newPassword.length<8){l("‚ùå New password must be at least 8 characters");return}if(s.newPassword!==s.confirmPassword){l("‚ùå New passwords do not match");return}if(s.currentPassword===s.newPassword){l("‚ùå New password must be different from current password");return}try{g(!0);const t=await j(s.currentPassword,s.newPassword);y("‚úÖ Password changed successfully! Your power level just increased!"),f({currentPassword:"",newPassword:"",confirmPassword:""}),p(0)}catch(t){const d=t?.message||"Failed to change password. Please check your current password.";l(`‚ùå ${d}`)}finally{g(!1)}},u=r=>{N({...a,[r]:!a[r]})},b=v();return e.jsx("div",{className:"min-h-0 bg-gradient-to-br from-blue-50 via-white to-orange-50 py-8 dark:from-slate-900 dark:via-slate-800 dark:to-slate-700",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#3B4CCA] to-blue-600 rounded-2xl p-8 mb-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:e.jsx(A,{className:"text-3xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold font-saiyan mb-2",children:"CHANGE PASSWORD"}),e.jsx("p",{className:"text-blue-100",children:"Secure your Capsule Corp account"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 dark:bg-slate-800",children:[e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"CURRENT PASSWORD *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a.current?"text":"password",name:"currentPassword",value:s.currentPassword,onChange:m,className:"w-full px-4 py-3 pr-12 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none dark:bg-slate-700 dark:border-slate-600 dark:text-white",required:!0}),e.jsx("button",{type:"button",onClick:()=>u("current"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-[#3B4CCA] transition-colors",children:a.current?e.jsx(h,{}):e.jsx(w,{})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"NEW PASSWORD *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a.new?"text":"password",name:"newPassword",value:s.newPassword,onChange:m,className:"w-full px-4 py-3 pr-12 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none dark:bg-slate-700 dark:border-slate-600 dark:text-white",required:!0}),e.jsx("button",{type:"button",onClick:()=>u("new"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-[#3B4CCA] transition-colors",children:a.new?e.jsx(h,{}):e.jsx(w,{})})]}),s.newPassword&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Password Strength:"}),e.jsx("span",{className:`text-sm font-bold ${b.color}`,children:b.text})]}),e.jsx("div",{className:"flex space-x-1",children:[...Array(5)].map((r,t)=>e.jsx("div",{className:`h-2 flex-1 rounded-full transition-all ${t<n?n<=2?"bg-red-500":n<=3?"bg-yellow-500":"bg-green-500":"bg-gray-200"}`},t))}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("p",{className:"text-xs text-gray-600 flex items-center space-x-2",children:[s.newPassword.length>=8?e.jsx(o,{className:"text-green-500"}):e.jsx(c,{className:"text-red-500"}),e.jsx("span",{children:"At least 8 characters"})]}),e.jsxs("p",{className:"text-xs text-gray-600 flex items-center space-x-2",children:[/[a-z]/.test(s.newPassword)&&/[A-Z]/.test(s.newPassword)?e.jsx(o,{className:"text-green-500"}):e.jsx(c,{className:"text-red-500"}),e.jsx("span",{children:"Uppercase & lowercase letters"})]}),e.jsxs("p",{className:"text-xs text-gray-600 flex items-center space-x-2",children:[/\d/.test(s.newPassword)?e.jsx(o,{className:"text-green-500"}):e.jsx(c,{className:"text-red-500"}),e.jsx("span",{children:"At least one number"})]}),e.jsxs("p",{className:"text-xs text-gray-600 flex items-center space-x-2",children:[/[!@#$%^&*(),.?":{}|<>]/.test(s.newPassword)?e.jsx(o,{className:"text-green-500"}):e.jsx(c,{className:"text-red-500"}),e.jsx("span",{children:"Special character (!@#$%...)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"CONFIRM NEW PASSWORD *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a.confirm?"text":"password",name:"confirmPassword",value:s.confirmPassword,onChange:m,className:"w-full px-4 py-3 pr-12 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none dark:bg-slate-700 dark:border-slate-600 dark:text-white",required:!0}),e.jsx("button",{type:"button",onClick:()=>u("confirm"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-[#3B4CCA] transition-colors",children:a.confirm?e.jsx(h,{}):e.jsx(w,{})})]}),s.confirmPassword&&e.jsx("div",{className:"mt-2",children:s.newPassword===s.confirmPassword?e.jsxs("p",{className:"text-sm text-green-600 flex items-center space-x-2",children:[e.jsx(o,{}),e.jsx("span",{children:"Passwords match"})]}):e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-2",children:[e.jsx(c,{}),e.jsx("span",{children:"Passwords do not match"})]})})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:x,className:`w-full bg-gradient-to-r from-[#3B4CCA] to-blue-600 text-white py-4 px-6 rounded-lg font-saiyan font-bold text-lg hover:shadow-xl transition-all hover:scale-105 ${x?"opacity-60 cursor-not-allowed":""}`,children:x?"UPDATING...":"UPDATE PASSWORD"})})]}),e.jsxs("div",{className:"mt-8 p-6 bg-blue-50 rounded-lg border-2 border-blue-200 dark:bg-slate-700 dark:border-slate-600",children:[e.jsx("h3",{className:"font-saiyan text-[#3B4CCA] dark:text-white font-bold mb-3",children:"üõ°Ô∏è SECURITY TIPS"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsx("li",{children:"‚Ä¢ Use a unique password you don't use anywhere else"}),e.jsx("li",{children:"‚Ä¢ Avoid common words or personal information"}),e.jsx("li",{children:"‚Ä¢ Change your password regularly (every 3-6 months)"}),e.jsx("li",{children:"‚Ä¢ Never share your password with anyone"}),e.jsx("li",{children:"‚Ä¢ Use a password manager to keep track of passwords"})]})]})]})]})})};export{D as default};
