import{d as I,c as A,o as D,K as T,r as u,a6 as z,a as e,j as r,a7 as w,a8 as L,a9 as U,aa as V,k as H,a5 as K}from"./index-3331d913.js";import{P as d}from"./Price-77cf65dd.js";function Z(){const{cartItems:o,getCartTotal:S,clearCart:k}=I(),{user:c}=A(),{showSuccess:E,showError:M}=D(),h=T(),[i,g]=u.useState(1),[b,f]=u.useState(!1),[l,O]=u.useState({firstName:"",lastName:"",email:(c==null?void 0:c.email)||"",phone:"",address:"",city:"",state:"",zipCode:"",country:"United States",cardNumber:"",expiryMonth:"",expiryYear:"",cvv:"",nameOnCard:"",shippingMethod:"standard",paymentMethod:"credit-card",promoCode:"",subscribeNewsletter:!1}),[a,y]=u.useState({});u.useEffect(()=>{if(!c){h("/auth");return}if(o.length===0){h("/cart");return}},[c,o,h]),z();const m=S(),x=m>500?0:25.99,N=m*.08,F=m+x+N,n=t=>{const{name:s,value:R,type:$,checked:j}=t.target;O(p=>({...p,[s]:$==="checkbox"?j:R})),a[s]&&y(p=>({...p,[s]:""}))},v=t=>{const s={};return t===1&&(l.firstName.trim()||(s.firstName="First name is required"),l.lastName.trim()||(s.lastName="Last name is required"),l.email.trim()||(s.email="Email is required"),l.phone.trim()||(s.phone="Phone number is required"),l.address.trim()||(s.address="Address is required"),l.city.trim()||(s.city="City is required"),l.state.trim()||(s.state="State is required"),l.zipCode.trim()||(s.zipCode="ZIP code is required")),t===2&&(l.cardNumber.replace(/\s/g,"")||(s.cardNumber="Card number is required"),l.expiryMonth||(s.expiryMonth="Expiry month is required"),l.expiryYear||(s.expiryYear="Expiry year is required"),l.cvv||(s.cvv="CVV is required"),l.nameOnCard.trim()||(s.nameOnCard="Name on card is required")),y(s),Object.keys(s).length===0},P=()=>{v(i)&&g(t=>t+1)},Y=()=>{g(t=>t-1)},q=async()=>{if(v(2)){f(!0);try{await new Promise(t=>setTimeout(t,2e3)),k(),E("ðŸŽ‰ Order placed successfully! Your capsules are being prepared for battle!",{title:"ORDER CONFIRMED",duration:5e3}),h("/")}catch{M("Failed to place order. Please try again.",{title:"ORDER FAILED"})}finally{f(!1)}}},C=[{number:1,title:"Shipping",description:"Delivery information"},{number:2,title:"Payment",description:"Payment details"},{number:3,title:"Review",description:"Confirm order"}];return!c||o.length===0?null:e("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 overflow-x-hidden",children:r("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:py-8 p-4",children:[r("div",{className:"text-center mb-6 sm:mb-8",children:[e("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800 font-saiyan mb-2",children:"SECURE CHECKOUT"}),e("p",{className:"text-sm sm:text-base text-gray-600",children:"Complete your legendary purchase"})]}),e("div",{className:"flex justify-center mb-8 sm:mb-12 overflow-x-auto pb-4",children:e("div",{className:"flex items-center space-x-4 sm:space-x-8 min-w-max px-4",children:C.map((t,s)=>r("div",{className:"flex items-center",children:[r("div",{className:"flex flex-col items-center",children:[e("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center font-bold transition-all text-sm sm:text-base ${i>=t.number?"bg-gradient-to-r from-orange-400 to-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:i>t.number?e(w,{}):t.number}),r("div",{className:"mt-2 text-center",children:[e("div",{className:"font-medium text-gray-800 text-xs sm:text-sm whitespace-nowrap",children:t.title}),e("div",{className:"text-xs text-gray-600 hidden sm:block",children:t.description})]})]}),s<C.length-1&&e("div",{className:`w-12 sm:w-16 h-1 mx-2 sm:mx-4 ${i>t.number?"bg-orange-400":"bg-gray-200"}`})]},t.number))})}),r("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:[e("div",{className:"lg:col-span-2",children:r("div",{className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6 lg:p-8",children:[i===1&&r("div",{children:[r("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6 font-saiyan flex items-center",children:[e(L,{className:"mr-3 text-orange-500"}),"SHIPPING INFORMATION"]}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e("input",{type:"text",name:"firstName",value:l.firstName,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.firstName?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,placeholder:"Enter your first name"}),a.firstName&&e("p",{className:"text-red-500 text-sm mt-1",children:a.firstName})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e("input",{type:"text",name:"lastName",value:l.lastName,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.lastName?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,placeholder:"Enter your last name"}),a.lastName&&e("p",{className:"text-red-500 text-sm mt-1",children:a.lastName})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e("input",{type:"email",name:"email",value:l.email,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.email?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,placeholder:"your@email.com"}),a.email&&e("p",{className:"text-red-500 text-sm mt-1",children:a.email})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),e("input",{type:"tel",name:"phone",value:l.phone,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.phone?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,placeholder:"(555) 123-4567"}),a.phone&&e("p",{className:"text-red-500 text-sm mt-1",children:a.phone})]}),r("div",{className:"md:col-span-2",children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),e("input",{type:"text",name:"address",value:l.address,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.address?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,placeholder:"123 Main Street"}),a.address&&e("p",{className:"text-red-500 text-sm mt-1",children:a.address})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),e("input",{type:"text",name:"city",value:l.city,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.city?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,placeholder:"West City"}),a.city&&e("p",{className:"text-red-500 text-sm mt-1",children:a.city})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),e("input",{type:"text",name:"state",value:l.state,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.state?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,placeholder:"CA"}),a.state&&e("p",{className:"text-red-500 text-sm mt-1",children:a.state})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code *"}),e("input",{type:"text",name:"zipCode",value:l.zipCode,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.zipCode?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,placeholder:"12345"}),a.zipCode&&e("p",{className:"text-red-500 text-sm mt-1",children:a.zipCode})]})]}),r("div",{className:"mt-8",children:[e("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Shipping Method"}),r("div",{className:"space-y-3",children:[r("label",{className:"flex items-center p-4 border rounded-xl cursor-pointer hover:bg-gray-50",children:[e("input",{type:"radio",name:"shippingMethod",value:"standard",checked:l.shippingMethod==="standard",onChange:n,className:"mr-4"}),r("div",{className:"flex-1",children:[e("div",{className:"font-medium",children:"Standard Shipping"}),e("div",{className:"text-sm text-gray-600",children:"5-7 business days"})]}),e("div",{className:"font-bold text-orange-600",children:m>500?"FREE":e(d,{value:25.99})})]}),r("label",{className:"flex items-center p-4 border rounded-xl cursor-pointer hover:bg-gray-50",children:[e("input",{type:"radio",name:"shippingMethod",value:"express",checked:l.shippingMethod==="express",onChange:n,className:"mr-4"}),r("div",{className:"flex-1",children:[e("div",{className:"font-medium",children:"Instant Transmission"}),e("div",{className:"text-sm text-gray-600",children:"1-2 business days"})]}),e("div",{className:"font-bold text-orange-600",children:e(d,{value:49.99})})]})]})]})]}),i===2&&r("div",{children:[r("h2",{className:"text-2xl font-bold text-gray-800 mb-6 font-saiyan flex items-center",children:[e(U,{className:"mr-3 text-orange-500"}),"PAYMENT INFORMATION"]}),r("div",{className:"space-y-6",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number *"}),e("input",{type:"text",name:"cardNumber",value:l.cardNumber,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.cardNumber?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,placeholder:"1234 5678 9012 3456"}),a.cardNumber&&e("p",{className:"text-red-500 text-sm mt-1",children:a.cardNumber})]}),r("div",{className:"grid grid-cols-3 gap-4",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month *"}),r("select",{name:"expiryMonth",value:l.expiryMonth,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.expiryMonth?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,children:[e("option",{value:"",children:"MM"}),Array.from({length:12},(t,s)=>e("option",{value:String(s+1).padStart(2,"0"),children:String(s+1).padStart(2,"0")},s+1))]}),a.expiryMonth&&e("p",{className:"text-red-500 text-sm mt-1",children:a.expiryMonth})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year *"}),r("select",{name:"expiryYear",value:l.expiryYear,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.expiryYear?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,children:[e("option",{value:"",children:"YYYY"}),Array.from({length:10},(t,s)=>e("option",{value:new Date().getFullYear()+s,children:new Date().getFullYear()+s},s))]}),a.expiryYear&&e("p",{className:"text-red-500 text-sm mt-1",children:a.expiryYear})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV *"}),e("input",{type:"text",name:"cvv",value:l.cvv,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.cvv?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,placeholder:"123",maxLength:"4"}),a.cvv&&e("p",{className:"text-red-500 text-sm mt-1",children:a.cvv})]})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name on Card *"}),e("input",{type:"text",name:"nameOnCard",value:l.nameOnCard,onChange:n,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 transition-all ${a.nameOnCard?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`,placeholder:"John Doe"}),a.nameOnCard&&e("p",{className:"text-red-500 text-sm mt-1",children:a.nameOnCard})]})]})]}),i===3&&r("div",{children:[r("h2",{className:"text-2xl font-bold text-gray-800 mb-6 font-saiyan flex items-center",children:[e(w,{className:"mr-3 text-orange-500"}),"REVIEW ORDER"]}),r("div",{className:"space-y-6",children:[r("div",{children:[e("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Order Items"}),e("div",{className:"space-y-3",children:o.map(t=>r("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[r("div",{className:"flex items-center space-x-4",children:[e("img",{src:t.image||t.imageUrl,alt:t.name,className:"w-16 h-16 object-cover rounded-lg"}),r("div",{children:[e("div",{className:"font-medium",children:t.name}),r("div",{className:"text-sm text-gray-600",children:["Qty: ",t.quantity]})]})]}),e("div",{className:"font-bold text-orange-600",children:e(d,{value:parseFloat(t.price)*t.quantity})})]},t.id))})]}),r("div",{children:[e("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Shipping Address"}),r("div",{className:"p-4 bg-gray-50 rounded-xl",children:[r("div",{children:[l.firstName," ",l.lastName]}),e("div",{children:l.address}),r("div",{children:[l.city,", ",l.state," ",l.zipCode]}),e("div",{children:l.phone})]})]}),r("div",{children:[e("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Payment Method"}),r("div",{className:"p-4 bg-gray-50 rounded-xl",children:[r("div",{children:["**** **** **** ",l.cardNumber.slice(-4)]}),e("div",{children:l.nameOnCard})]})]})]})]}),r("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[i>1&&e("button",{onClick:Y,className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"Previous"}),i<3?e("button",{onClick:P,className:`px-8 py-3 bg-gradient-to-r from-orange-400 to-orange-600 text-white rounded-xl font-bold transition-all hover:scale-105 kamehameha-glow ${i===1?"ml-auto":""}`,children:"Continue"}):e("button",{onClick:q,disabled:b,className:"ml-auto px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-bold transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Placing Order...":"Place Order"})]})]})}),e("div",{className:"lg:col-span-1",children:r("div",{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-8",children:[e("h3",{className:"text-xl font-bold text-gray-800 mb-6 font-saiyan",children:"ORDER SUMMARY"}),e("div",{className:"space-y-4 mb-6",children:o.map(t=>r("div",{className:"flex justify-between items-start gap-3",children:[r("div",{className:"flex items-start gap-3 flex-1",children:[e("img",{src:t.image||t.imageUrl,alt:t.name,className:"w-12 h-12 object-cover rounded-lg flex-shrink-0"}),r("div",{className:"flex-1 min-w-0",children:[e("div",{className:"font-medium text-sm truncate",children:t.name}),r("div",{className:"text-xs text-gray-600",children:["Qty: ",t.quantity]})]})]}),e("div",{className:"font-bold text-sm whitespace-nowrap",children:e(d,{value:parseFloat(t.price)*t.quantity})})]},t.id))}),e("hr",{className:"border-gray-200 mb-4"}),r("div",{className:"space-y-2 mb-6",children:[r("div",{className:"flex justify-between",children:[e("span",{children:"Subtotal:"}),e("span",{children:e(d,{value:m})})]}),r("div",{className:"flex justify-between",children:[e("span",{children:"Shipping:"}),e("span",{className:x===0?"text-green-600 font-medium":"",children:x===0?"FREE":e(d,{value:x})})]}),r("div",{className:"flex justify-between",children:[e("span",{children:"Tax:"}),e("span",{children:e(d,{value:N})})]}),e("hr",{className:"border-gray-200"}),r("div",{className:"flex justify-between text-xl font-bold",children:[e("span",{children:"Total:"}),e("span",{className:"text-orange-600 font-saiyan",children:e(d,{value:F})})]})]}),r("div",{className:"space-y-3 text-sm text-gray-600",children:[r("div",{className:"flex items-center",children:[e(V,{className:"mr-2 text-green-500"}),e("span",{children:"SSL Secured Checkout"})]}),r("div",{className:"flex items-center",children:[e(H,{className:"mr-2 text-blue-500"}),e("span",{children:"Capsule Corp Protection"})]}),r("div",{className:"flex items-center",children:[e(K,{className:"mr-2 text-orange-500"}),e("span",{children:"30-Day Money Back"})]})]})]})})]})]})})}export{Z as default};
