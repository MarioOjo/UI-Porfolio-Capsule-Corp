import{a3 as S,a4 as P,r as i,j as e,h as C}from"./vendor_react-haPYDNah.js";import{P as f}from"./product-detail-CKj_RcPP.js";import{b as E}from"./admin-D6GwwKla.js";import"./vendor-Bpvzf4S2.js";const l={all:["products"],lists:()=>[...l.all,"list"],list:(t={})=>[...l.lists(),{filters:t}],details:()=>[...l.all,"detail"],detail:t=>[...l.details(),t],slug:t=>[...l.all,"slug",t],featured:()=>[...l.all,"featured"],category:t=>[...l.all,"category",t],search:t=>[...l.all,"search",t]};async function L(t={}){const s=new URLSearchParams;t.featured&&s.append("featured","true"),t.category&&s.append("category",t.category),t.search&&s.append("search",t.search),t.limit&&s.append("limit",String(t.limit));const c=s.toString(),r=`/api/products${c?`?${c}`:""}`;return(await E(r))?.products||[]}function F(t={},s={}){return S({queryKey:l.list(t),queryFn:()=>L(t),keepPreviousData:!0,...s})}function U(){const[t]=P(),[s,c]=i.useState(t.get("search")||""),[r,x]=i.useState("all"),[u,p]=i.useState("featured"),[T,A]=i.useState(!1),b=i.useMemo(()=>{const a={};return s.trim()&&(a.search=s.trim()),r!=="all"&&(a.category=r),a},[s,r]),{data:d=[],isLoading:y,isError:v,error:N}=F(b),j=[{value:"all",label:"All Categories"},{value:"Battle Gear",label:"⚔️ Battle Gear"},{value:"Training",label:"💪 Training"},{value:"Tech",label:"📡 Tech"},{value:"Capsules",label:"🏠 Capsules"},{value:"Consumables",label:"🍃 Consumables"}],w=[{value:"featured",label:"Featured First"},{value:"price-low",label:"Price: Low to High"},{value:"price-high",label:"Price: High to Low"},{value:"power-high",label:"Power Level: High to Low"},{value:"power-low",label:"Power Level: Low to High"},{value:"name",label:"Name A-Z"}],m=i.useMemo(()=>!d||d.length===0?[]:[...d].sort((o,n)=>{switch(u){case"price-low":return parseFloat(o.price)-parseFloat(n.price);case"price-high":return parseFloat(n.price)-parseFloat(o.price);case"power-high":return(n.power_level||0)-(o.power_level||0);case"power-low":return(o.power_level||0)-(n.power_level||0);case"name":return o.name.localeCompare(n.name);case"featured":default:return o.featured&&!n.featured?-1:!o.featured&&n.featured?1:(n.power_level||0)-(o.power_level||0)}}),[d,u]),h=m.filter(a=>a.featured),g=m.filter(a=>!a.featured);return y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:"⚡"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4 font-saiyan",children:"LOADING CAPSULES..."}),e.jsx("p",{className:"text-gray-600",children:"Gathering legendary gear from the vault..."})]})})}):v?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4 font-saiyan",children:"CONNECTION ERROR"}),e.jsx("p",{className:"text-gray-600 mb-6",children:N?.message||"Failed to load products. Please try again."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-orange-400 to-orange-600 text-white px-8 py-3 rounded-xl font-saiyan font-bold kamehameha-glow transition-all hover:scale-105",children:"RETRY"})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:py-8",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800 mb-4 font-saiyan",children:"CAPSULE CORP INVENTORY"}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base lg:text-lg",children:"Power up with authentic Z-Fighter equipment and legendary gear"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(C,{className:"absolute left-3 sm:left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search Dragon Balls, Gear...",value:s,onChange:a=>c(a.target.value),className:"w-full pl-10 sm:pl-12 pr-4 py-2 sm:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-600/20 transition-all text-sm sm:text-base"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("select",{value:r,onChange:a=>x(a.target.value),className:"flex-1 px-3 sm:px-4 py-2 sm:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-600/20 text-sm sm:text-base touch-target",children:j.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}),e.jsx("select",{value:u,onChange:a=>p(a.target.value),className:"flex-1 px-3 sm:px-4 py-2 sm:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-600/20 text-sm sm:text-base touch-target",children:w.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-gray-600 text-sm sm:text-base",children:[e.jsx("span",{className:"font-bold text-orange-600",children:m.length})," products",s&&e.jsxs("span",{className:"hidden sm:inline",children:[' for "',e.jsx("span",{className:"font-medium",children:s}),'"']}),r!=="all"&&e.jsxs("span",{className:"hidden sm:inline",children:[" in ",e.jsx("span",{className:"font-medium",children:r})]})]})})]}),h.length>0&&e.jsxs("section",{className:"mb-8 sm:mb-12",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-400 to-orange-600 text-white text-center py-4 sm:py-6 mb-6 sm:mb-8 rounded-2xl shadow-lg kamehameha-glow",children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold font-saiyan tracking-wide",children:"⭐ LEGENDARY ITEMS ⭐"}),e.jsx("p",{className:"mt-2 opacity-90 text-sm sm:text-base",children:"Ultra-rare gear for elite warriors"})]}),e.jsx("div",{className:"mobile-grid",children:h.map(a=>e.jsx(f,{product:a,size:"large"},a.id))})]}),g.length>0&&e.jsxs("section",{className:"mb-8 sm:mb-12",children:[h.length>0&&e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-6 sm:mb-8 font-saiyan",children:"ALL CAPSULES"}),e.jsx("div",{className:"mobile-grid",children:g.map(a=>e.jsx(f,{product:a,size:"medium"},a.id))})]}),m.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4 font-saiyan",children:"NO CAPSULES FOUND"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find any products matching your search criteria."}),e.jsx("button",{onClick:()=>{c(""),x("all"),p("featured")},className:"bg-gradient-to-r from-orange-400 to-orange-600 text-white px-8 py-3 rounded-xl font-saiyan font-bold kamehameha-glow transition-all hover:scale-105",children:"RESET FILTERS"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl p-6 sm:p-8 text-center shadow-xl",children:[e.jsx("div",{className:"text-3xl sm:text-4xl mb-4",children:"💡"}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-4 font-saiyan",children:"SAIYAN BATTLE TIP"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg opacity-90",children:"Combine multiple items for devastating power combos! Mix training gear with battle equipment for maximum effectiveness."})]})]})})}export{U as default};
