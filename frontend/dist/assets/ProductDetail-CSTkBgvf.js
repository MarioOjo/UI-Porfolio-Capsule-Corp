import{u as $,j as e,L as y,J as I,K as D,c as U,b as B,d as K,e as M,r,M as j,N as W,k as q,P as N,O as Q,Q as H,F as V,g as z,R as G,T as J,f as C}from"./index-CzXlKqXq.js";import{I as Y,P as X}from"./ProductCard-DuA5BsV3.js";/* empty css                   */function v({separator:m=e.jsx(I,{}),rootLabel:i="Home"}){const g=$(),{pathname:b}=g,n=b.split("/").filter(c=>c);return e.jsx("nav",{className:"breadcrumb-nav","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"breadcrumb-list",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(y,{to:"/",className:"breadcrumb-link",children:i})}),n.map((c,o)=>{const s=`/${n.slice(0,o+1).join("/")}`,u=o===n.length-1,d=decodeURIComponent(c.replace(/-/g," "));return e.jsxs("li",{className:`breadcrumb-item${u?" active":""}`,children:[e.jsx("span",{className:"breadcrumb-separator",children:m}),u?e.jsx("span",{className:"breadcrumb-current",children:d}):e.jsx(y,{to:s,className:"breadcrumb-link",children:d})]},s)})]})})}function re(){const{slug:m}=D(),i=U(),{user:g}=B(),{addToCart:b}=K(),{addToWishlist:n,removeFromWishlist:c,isInWishlist:o}=M(),[s,u]=r.useState(null),[d,P]=r.useState([]),[p,T]=r.useState(0),[Z,f]=r.useState(!1),[h,O]=r.useState(1),[x,R]=r.useState("description"),[E,k]=r.useState(!0),[ee,w]=r.useState(null);r.useEffect(()=>{(async()=>{try{k(!0),w(null);const t=await C(`/api/products/slug/${m}`);if(t.product){u(t.product);const L=((await C(`/api/products?category=${encodeURIComponent(t.product.category)}&limit=5`)).products||[]).filter(_=>_.id!==t.product.id).slice(0,4);P(L)}else i("/products")}catch(t){console.error("Error fetching product:",t),w("Product not found"),i("/products")}finally{k(!1)}})()},[m,i]),r.useEffect(()=>{if(!s)return;const a=s.gallery?.[p]??s.image,t=j(a,800);f(!1);const l=new Image;return l.src=t,l.onload=()=>f(!0),l.onerror=()=>f(!1),()=>{l.onload=null,l.onerror=null}},[s,p]);const F=()=>{s&&(s.inStock||s.in_stock||s.stock>0)&&b(s,h)},A=()=>{s&&(o(s.id)?c(s.id):n(s))},S=a=>{O(t=>Math.max(1,Math.min(s.stock,t+a)))};return E?e.jsx("div",{className:"min-h-0 bg-gradient-to-br from-blue-50 to-orange-50 overflow-x-hidden",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-16",children:[e.jsx(v,{}),e.jsxs("div",{className:"text-center mt-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-24 w-24 border-b-4 border-orange-500 mx-auto mb-6"}),e.jsx("p",{className:"text-gray-600 font-saiyan text-xl",children:"Loading product..."})]})]})}):s?e.jsx("div",{className:"min-h-0 bg-gradient-to-br from-blue-50 to-orange-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx(v,{}),e.jsxs("button",{onClick:()=>i(-1),className:"flex items-center space-x-2 text-blue-600 hover:text-orange-600 transition-colors mb-6 font-saiyan","aria-label":"Back to products",children:[e.jsx(W,{}),e.jsx("span",{children:"BACK TO PRODUCTS"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[s&&e.jsx(Y,{src:j(s.gallery?.[p]??s.image,800),alt:s.name,className:"aspect-square shadow-xl",overlayText:s.name}),!(s.inStock||s.in_stock||s.stock>0)&&e.jsx("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-4 py-2 rounded-full font-bold shadow-lg",children:"OUT OF STOCK"}),(s.featured||s.is_featured)&&e.jsx("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-orange-400 to-orange-600 text-white px-4 py-2 rounded-full font-bold kamehameha-glow",children:"LEGENDARY ITEM"})]}),s.gallery&&s.gallery.length>1&&e.jsx("div",{className:"flex space-x-2 overflow-x-auto","aria-label":"Product gallery thumbnails",children:s.gallery.map((a,t)=>e.jsx("button",{onClick:()=>T(t),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${p===t?"border-orange-500 scale-105":"border-gray-200 hover:border-blue-400"}`,"aria-label":`View image ${t+1}`,children:e.jsx("img",{src:j(a,80),alt:`${s.name} view ${t+1}`,className:"w-full h-full object-cover",onError:l=>{l.target.src="/api/placeholder/80/80"}})},t))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("span",{className:"inline-block bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm font-semibold",children:s.category})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-800 font-saiyan",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"text-yellow-400 text-xl"}),e.jsxs("span",{className:"text-lg text-gray-700",children:["Power Level: ",e.jsx("span",{className:"font-bold text-orange-600",children:Number(s.powerLevel||s.power_level||0).toLocaleString()})]})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((a,t)=>e.jsx("span",{className:"bg-orange-100 text-orange-600 px-3 py-1 rounded-full text-sm font-medium",children:a},t))}),e.jsxs("div",{className:"flex items-center space-x-4",children:[(s.originalPrice||s.original_price)&&e.jsx("span",{className:"text-2xl text-gray-400 line-through",children:e.jsx(N,{value:s.originalPrice||s.original_price})}),e.jsx("span",{className:"text-4xl font-bold text-orange-600 font-saiyan",children:e.jsx(N,{value:s.price})}),(s.originalPrice||s.original_price)&&e.jsxs("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:["SAVE ",e.jsx(N,{value:parseFloat(s.originalPrice||s.original_price)-parseFloat(s.price)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.inStock||s.in_stock||s.stock>0?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:`font-medium ${s.inStock||s.in_stock||s.stock>0?"text-green-600":"text-red-600"}`,children:s.inStock||s.in_stock||s.stock>0?s.stock<=5?`Only ${s.stock} left in stock!`:"In Stock":"Out of Stock"})]}),(s.inStock||s.in_stock||s.stock>0)&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-lg font-medium text-gray-700",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center border-2 border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>S(-1),disabled:h<=1,className:"p-2 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Decrease quantity",children:e.jsx(Q,{})}),e.jsx("span",{className:"px-4 py-2 min-w-[3rem] text-center font-bold","aria-live":"polite",children:h}),e.jsx("button",{onClick:()=>S(1),disabled:h>=s.stock,className:"p-2 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Increase quantity",children:e.jsx(H,{})})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{onClick:F,disabled:!(s.inStock||s.in_stock||s.stock>0),className:`flex-1 flex items-center justify-center px-8 py-4 rounded-xl font-saiyan font-bold text-lg transition-all ${s.inStock||s.in_stock||s.stock>0?"bg-gradient-to-r from-orange-400 to-orange-600 text-white kamehameha-glow hover:scale-105 hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,"aria-label":s.inStock||s.in_stock||s.stock>0?"Add to cart":"Out of stock",children:[e.jsx(V,{className:"mr-3"}),s.inStock||s.in_stock||s.stock>0?"ADD TO CAPSULE":"OUT OF STOCK"]}),e.jsx("button",{onClick:A,className:`px-6 py-4 rounded-xl border-2 transition-all ${o(s.id)?"bg-red-500 text-white border-red-500":"bg-white text-gray-700 border-gray-300 hover:border-red-500 hover:text-red-500"} ${g?"":"opacity-50 cursor-not-allowed"}`,disabled:!g,"aria-label":o(s.id)?"Remove from wishlist":"Add to wishlist",children:e.jsx(z,{className:"text-xl"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx(G,{}),e.jsx("span",{className:"text-sm",children:"Battle Tested"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[e.jsx(J,{}),e.jsx("span",{className:"text-sm",children:"Energy Efficient"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-12",children:[e.jsx("div",{className:"border-b",children:e.jsx("nav",{className:"flex","aria-label":"Product details tabs",children:[{id:"description",label:"Description"},{id:"specifications",label:"Specifications"},{id:"reviews",label:"Reviews"}].map(a=>e.jsx("button",{onClick:()=>R(a.id),className:`px-8 py-4 font-saiyan font-bold transition-colors ${x===a.id?"bg-gradient-to-r from-orange-400 to-orange-600 text-white":"text-gray-600 hover:text-orange-600"}`,"aria-selected":x===a.id,"aria-controls":`tab-panel-${a.id}`,role:"tab",children:a.label},a.id))})}),e.jsxs("div",{className:"p-8",children:[x==="description"&&e.jsx("div",{className:"prose max-w-none",id:"tab-panel-description",role:"tabpanel",children:e.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:s.description})}),x==="specifications"&&s.specifications&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",id:"tab-panel-specifications",role:"tabpanel",children:Object.entries(s.specifications).map(([a,t])=>e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-200",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[a,":"]}),e.jsx("span",{className:"font-bold text-orange-600",children:t})]},a))}),x==="reviews"&&e.jsx("div",{className:"text-center py-12",id:"tab-panel-reviews",role:"tabpanel",children:e.jsx("p",{className:"text-gray-600 text-lg",children:"Reviews coming soon! Battle-test this item and share your experience."})})]})]}),d.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 font-saiyan mb-8",children:"RELATED CAPSULES"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map(a=>e.jsx(X,{product:a,size:"medium"},a.id))})]})]})}):e.jsx("div",{className:"min-h-0 bg-gradient-to-br from-blue-50 to-orange-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-16",children:[e.jsx(v,{}),e.jsxs("div",{className:"text-center mt-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4 font-saiyan",children:"PRODUCT NOT FOUND"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"The product you're looking for doesn't exist in our capsule inventory."}),e.jsx(y,{to:"/products",className:"inline-block bg-gradient-to-r from-orange-400 to-orange-600 text-white px-8 py-3 rounded-xl font-saiyan font-bold kamehameha-glow transition-all hover:scale-105",children:"BACK TO PRODUCTS"})]})]})})}export{re as default};
