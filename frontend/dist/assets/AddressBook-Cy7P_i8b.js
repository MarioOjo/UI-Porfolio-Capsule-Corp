import{j as e,b as k,m as B,r as l,f as m,K as T,X as F,as as O,al as R,a0 as z,ad as I}from"./index-CPlhvEIb.js";function P({isOpen:h,message:f="Are you sure?",onConfirm:j,onCancel:r}){return h?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Confirmation"}),e.jsx("p",{className:"text-sm text-gray-700 mb-4",children:f}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Yes, delete"})]})]})}):null}const U=()=>{const h=s=>{p(s),x({type:s.type||"home",name:s.name||"",fullName:s.fullName||"",street:s.street||"",city:s.city||"",state:s.state||"",zip:s.zip||"",phone:s.phone||""}),i(!0)},f=()=>{if(!t.fullName||!t.street||!t.city){o("❌ Please fill in all required fields");return}(async()=>{try{const s=await m(`/api/addresses/${c.id}`,{method:"PUT",body:JSON.stringify(t)});d(a=>a.map(u=>u.id===c.id?s.address:u)),i(!1),p(null),x({type:"home",name:"",fullName:"",street:"",city:"",state:"",zip:"",phone:""}),r("✅ Address updated!")}catch{o("❌ Could not update address")}})()},{user:j}=k(),{showSuccess:r,showError:o}=B(),[N,d]=l.useState([]),[L,C]=l.useState(!0),[v,i]=l.useState(!1),[c,p]=l.useState(null),[t,x]=l.useState({type:"home",name:"",fullName:"",street:"",city:"",state:"",zip:"",phone:""}),n=s=>{x({...t,[s.target.name]:s.target.value})},A=()=>{if(!t.fullName||!t.street||!t.city){o("❌ Please fill in all required fields");return}(async()=>{try{const s=await m("/api/addresses",{method:"POST",body:JSON.stringify(t)});d(a=>[s.address,...a]),i(!1),x({type:"home",name:"",fullName:"",street:"",city:"",state:"",zip:"",phone:""}),r("✅ Address added successfully!")}catch{o("❌ Could not add address")}})()},w=s=>{b(s),y(!0)},[D,y]=l.useState(!1),[g,b]=l.useState(null),E=async()=>{if(g)try{await m(`/api/addresses/${g}`,{method:"DELETE"}),d(s=>s.filter(a=>a.id!==g)),r("🗑️ Address deleted")}catch{o("❌ Could not delete address")}finally{y(!1),b(null)}},S=s=>{(async()=>{try{d(a=>a.map(u=>({...u,isDefault:u.id===s}))),r("✅ Default address updated")}catch{o("❌ Could not set default")}})()};return l.useEffect(()=>{let s=!0;return(async()=>{try{const a=await m("/api/addresses");s&&d(a.addresses||[])}catch{}finally{s&&C(!1)}})(),()=>{s=!1}},[]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 py-8 overflow-x-hidden",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#3B4CCA] to-blue-600 rounded-2xl p-8 mb-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold font-saiyan mb-2",children:"ADDRESS BOOK"}),e.jsx("p",{className:"text-blue-100",children:"Manage your delivery addresses"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"bg-white text-[#3B4CCA] px-6 py-3 rounded-lg font-saiyan font-bold hover:bg-gray-100 transition-all flex items-center space-x-2",children:[e.jsx(T,{}),e.jsx("span",{children:"ADD ADDRESS"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:N.map(s=>e.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 border-2 transition-all hover:shadow-xl ${s.isDefault?"border-[#3B4CCA]":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[s.type==="home"?e.jsx(F,{className:"text-[#3B4CCA]"}):e.jsx(O,{className:"text-[#3B4CCA]"}),e.jsx("span",{className:"font-saiyan text-[#3B4CCA] font-bold",children:s.name||(s.type||"").toUpperCase()})]}),s.isDefault&&e.jsx("span",{className:"bg-green-100 text-green-700 text-xs font-bold px-3 py-1 rounded-full",children:"DEFAULT"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("p",{className:"font-bold text-gray-800",children:s.fullName}),e.jsx("p",{className:"text-gray-600",children:s.street}),e.jsxs("p",{className:"text-gray-600",children:[s.city,", ",s.state," ",s.zip]}),e.jsx("p",{className:"text-gray-600",children:s.phone})]}),e.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>h(s),className:"bg-yellow-50 text-yellow-700 py-2 px-4 rounded-lg hover:bg-yellow-100 transition-all flex items-center",children:[e.jsx(R,{className:"mr-1"})," EDIT"]}),!s.isDefault&&e.jsx("button",{onClick:()=>S(s.id),className:"flex-1 bg-blue-50 text-[#3B4CCA] py-2 px-4 rounded-lg hover:bg-blue-100 transition-all font-saiyan text-sm",children:"SET DEFAULT"}),e.jsx("button",{onClick:()=>w(s.id),className:"bg-red-50 text-red-600 py-2 px-4 rounded-lg hover:bg-red-100 transition-all",children:e.jsx(z,{})})]})]},s.id))}),N.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx(I,{className:"text-6xl text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 font-saiyan",children:"No Addresses Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first delivery address to get started"}),e.jsx("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-[#3B4CCA] to-blue-600 text-white px-6 py-3 rounded-lg font-saiyan font-bold hover:shadow-lg transition-all",children:"ADD YOUR FIRST ADDRESS"})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 sm:p-2",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 sm:p-4 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-2xl sm:text-xl font-bold text-gray-800 font-saiyan mb-6",children:c?"EDIT ADDRESS":"ADD NEW ADDRESS"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"ADDRESS TYPE"}),e.jsxs("select",{name:"type",value:t.type,onChange:n,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none",children:[e.jsx("option",{value:"home",children:"Home"}),e.jsx("option",{value:"work",children:"Work"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"FULL NAME *"}),e.jsx("input",{type:"text",name:"fullName",value:t.fullName,onChange:n,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"STREET ADDRESS *"}),e.jsx("input",{type:"text",name:"street",value:t.street,onChange:n,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"CITY *"}),e.jsx("input",{type:"text",name:"city",value:t.city,onChange:n,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"STATE"}),e.jsx("input",{type:"text",name:"state",value:t.state,onChange:n,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"ZIP CODE"}),e.jsx("input",{type:"text",name:"zip",value:t.zip,onChange:n,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-saiyan text-gray-700 mb-2",children:"PHONE"}),e.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:n,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#3B4CCA] focus:outline-none"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 sm:flex-col sm:space-y-2 sm:space-x-0",children:[e.jsx("button",{onClick:()=>{i(!1),p(null),x({type:"home",name:"",fullName:"",street:"",city:"",state:"",zip:"",phone:""})},className:"flex-1 bg-gray-300 text-gray-700 py-3 px-4 rounded-lg font-saiyan font-bold hover:bg-gray-400 transition-colors",children:"CANCEL"}),e.jsx("button",{onClick:c?f:A,className:"flex-1 bg-gradient-to-r from-[#3B4CCA] to-blue-600 text-white py-3 px-4 rounded-lg font-saiyan font-bold hover:shadow-lg transition-all",children:c?"SAVE CHANGES":"ADD ADDRESS"})]})]})]})}),e.jsx(P,{isOpen:D,message:"Are you sure you want to delete this address?",onConfirm:E,onCancel:()=>{y(!1),b(null)}})]})})};export{U as default};
