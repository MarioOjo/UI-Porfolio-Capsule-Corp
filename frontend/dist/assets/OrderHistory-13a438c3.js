import{c as $,b as S,r as i,j as t,a as e,ao as g,I as A,L as O,P as d,W as F,aa as b,an as y,m as T,Q as D}from"./index-bd65ff26.js";const R=()=>{const{user:o}=$(),{isDarkMode:a}=S(),[x,m]=i.useState([]),[u,h]=i.useState([]),[n,f]=i.useState(""),[c,N]=i.useState("all"),[l,p]=i.useState(null);i.useEffect(()=>{!o||!o.id||(async()=>{try{const s=await(await fetch(`/api/orders/user/${o.id}`)).json();s.success&&Array.isArray(s.orders)?(m(s.orders),h(s.orders)):(m([]),h([]))}catch{m([]),h([])}})()},[o]),i.useEffect(()=>{let r=x;n&&(r=r.filter(s=>s.id.toLowerCase().includes(n.toLowerCase())||s.items.some(C=>C.name.toLowerCase().includes(n.toLowerCase())))),c!=="all"&&(r=r.filter(s=>s.status===c)),h(r)},[n,c,x]);const v=r=>{switch(r){case"delivered":return e(D,{className:"text-green-500"});case"shipped":return e(b,{className:"text-blue-500"});case"processing":return e(T,{className:"text-orange-500"});case"cancelled":return e(y,{className:"text-red-500"});default:return e(g,{className:"text-gray-500"})}},w=r=>{switch(r){case"delivered":return"bg-green-100 text-green-800 border-green-200";case"shipped":return"bg-blue-100 text-blue-800 border-blue-200";case"processing":return"bg-orange-100 text-orange-800 border-orange-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return t("div",{className:`min-h-screen py-8 ${a?"bg-gradient-to-br from-slate-900 to-slate-800":"bg-gradient-to-br from-blue-50 to-orange-50"}`,children:[e("div",{className:"max-w-6xl mx-auto px-4",children:t("div",{className:`rounded-2xl shadow-2xl overflow-hidden ${a?"bg-slate-800 border border-slate-700":"bg-white border border-blue-100"}`,children:[e("div",{className:"bg-gradient-to-r from-[#3B4CCA] to-blue-600 px-8 py-6",children:t("div",{className:"flex items-center space-x-4",children:[e("div",{className:"w-16 h-16 bg-gradient-to-br from-[#FFD700] to-[#FF9E00] rounded-full flex items-center justify-center border-4 border-white shadow-lg",children:e(g,{className:"text-[#3B4CCA] text-2xl"})}),t("div",{children:[e("h1",{className:"text-3xl font-bold text-white font-saiyan",children:"ORDER HISTORY"}),e("p",{className:"text-blue-100",children:"Track and manage your Capsule Corp orders"})]})]})}),e("div",{className:"p-6 border-b border-gray-200 dark:border-slate-600",children:t("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[t("div",{className:"relative flex-1 max-w-md",children:[e("input",{type:"text",value:n,onChange:r=>f(r.target.value),placeholder:"Search orders or products...",className:`w-full px-4 py-3 pl-12 rounded-lg border-2 transition-all ${a?"bg-slate-700 border-slate-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:ring-2 focus:ring-blue-500`}),e(A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"})]}),t("select",{value:c,onChange:r=>N(r.target.value),className:`px-4 py-3 rounded-lg border-2 transition-all ${a?"bg-slate-700 border-slate-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:ring-2 focus:ring-blue-500`,children:[e("option",{value:"all",children:"All Orders"}),e("option",{value:"processing",children:"Processing"}),e("option",{value:"shipped",children:"Shipped"}),e("option",{value:"delivered",children:"Delivered"}),e("option",{value:"cancelled",children:"Cancelled"})]})]})}),e("div",{className:"p-6",children:u.length===0?t("div",{className:"text-center py-12",children:[e(g,{className:`text-6xl mx-auto mb-4 ${a?"text-gray-600":"text-gray-300"}`}),e("h3",{className:`text-xl font-bold mb-2 font-saiyan ${a?"text-gray-400":"text-gray-500"}`,children:"NO ORDERS FOUND"}),e("p",{className:`${a?"text-gray-500":"text-gray-400"} mb-6`,children:n||c!=="all"?"Try adjusting your search or filters":"Start shopping to see your orders here"}),e(O,{to:"/products",className:"px-6 py-3 bg-gradient-to-r from-[#3B4CCA] to-blue-600 text-white rounded-lg hover:from-[#2A3B9A] hover:to-blue-700 transition-all font-saiyan font-bold",children:"START SHOPPING"})]}):e("div",{className:"space-y-6",children:u.map(r=>t("div",{className:`rounded-xl border-2 transition-all ${a?"border-slate-600 bg-slate-700 hover:border-slate-500":"border-gray-200 bg-white hover:border-gray-300"}`,children:[e("div",{className:"p-6 border-b border-gray-200 dark:border-slate-600",children:t("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[t("div",{children:[e("h3",{className:`text-lg font-bold font-saiyan ${a?"text-white":"text-[#3B4CCA]"}`,children:r.id}),t("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:["Ordered on ",new Date(r.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),t("div",{className:"flex items-center space-x-4",children:[e("span",{className:`px-3 py-1 rounded-full text-sm font-semibold border ${w(r.status)}`,children:t("div",{className:"flex items-center space-x-1",children:[v(r.status),e("span",{children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})]})}),t("div",{className:"text-right",children:[e("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:"Total"}),e("p",{className:`text-lg font-bold ${a?"text-white":"text-[#3B4CCA]"}`,children:e(d,{value:r.total})})]})]})]})}),t("div",{className:"p-6",children:[e("div",{className:"space-y-4",children:r.items.map(s=>t("div",{className:"flex items-center space-x-4",children:[e("img",{src:s.image,alt:s.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"}),t("div",{className:"flex-1",children:[e("h4",{className:`font-semibold ${a?"text-white":"text-gray-900"}`,children:s.name}),t("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:["Quantity: ",s.quantity," × ",e(d,{value:s.price})]})]}),e("div",{className:`text-right font-semibold ${a?"text-white":"text-gray-900"}`,children:e(d,{value:parseFloat(s.price)*s.quantity})})]},s.id))}),t("div",{className:"mt-6 flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[t("div",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:[t("p",{children:[e("strong",{children:"Shipping:"})," ",r.shipping.address]}),t("p",{children:[e("strong",{children:"Method:"})," ",r.shipping.method]}),r.shipping.tracking&&t("p",{children:[e("strong",{children:"Tracking:"})," ",r.shipping.tracking]})]}),t("div",{className:"flex space-x-3",children:[t("button",{onClick:()=>p(r),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[#3B4CCA] to-blue-600 text-white rounded-lg hover:from-[#2A3B9A] hover:to-blue-700 transition-all font-saiyan text-sm",children:[e(F,{}),e("span",{children:"VIEW DETAILS"})]}),r.status==="shipped"&&t("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all font-saiyan text-sm",children:[e(b,{}),e("span",{children:"TRACK ORDER"})]})]})]})]})]},r.id))})})]})}),l&&e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t("div",{className:`max-w-2xl w-full rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto ${a?"bg-slate-800 border border-slate-700":"bg-white border border-blue-100"}`,children:[e("div",{className:"p-6 border-b border-gray-200 dark:border-slate-600",children:t("div",{className:"flex justify-between items-center",children:[e("h2",{className:`text-2xl font-bold font-saiyan ${a?"text-white":"text-[#3B4CCA]"}`,children:"ORDER DETAILS"}),e("button",{onClick:()=>p(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:e(y,{})})]})}),e("div",{className:"p-6",children:t("div",{className:"space-y-6",children:[t("div",{children:[e("h3",{className:`font-bold mb-2 font-saiyan ${a?"text-white":"text-gray-900"}`,children:"ORDER INFORMATION"}),t("div",{className:`text-sm space-y-1 ${a?"text-gray-300":"text-gray-700"}`,children:[t("p",{children:[e("strong",{children:"Order ID:"})," ",l.id]}),t("p",{children:[e("strong",{children:"Date:"})," ",new Date(l.date).toLocaleDateString()]}),t("p",{children:[e("strong",{children:"Status:"})," ",l.status]}),t("p",{children:[e("strong",{children:"Total:"})," ",e(d,{value:l.total})]})]})]}),t("div",{children:[e("h3",{className:`font-bold mb-2 font-saiyan ${a?"text-white":"text-gray-900"}`,children:"ITEMS ORDERED"}),e("div",{className:"space-y-3",children:l.items.map(r=>t("div",{className:"flex items-center space-x-3",children:[e("img",{src:r.image,alt:r.name,className:"w-12 h-12 object-cover rounded-lg"}),t("div",{className:"flex-1",children:[e("p",{className:`font-semibold ${a?"text-white":"text-gray-900"}`,children:r.name}),t("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:[e(d,{value:parseFloat(r.price)})," × ",r.quantity]})]}),e("p",{className:`font-semibold ${a?"text-white":"text-gray-900"}`,children:e(d,{value:parseFloat(r.price)*r.quantity})})]},r.id))})]}),t("div",{children:[e("h3",{className:`font-bold mb-2 font-saiyan ${a?"text-white":"text-gray-900"}`,children:"SHIPPING INFORMATION"}),t("div",{className:`text-sm space-y-1 ${a?"text-gray-300":"text-gray-700"}`,children:[t("p",{children:[e("strong",{children:"Address:"})," ",l.shipping.address]}),t("p",{children:[e("strong",{children:"Method:"})," ",l.shipping.method]}),l.shipping.tracking&&t("p",{children:[e("strong",{children:"Tracking Number:"})," ",l.shipping.tracking]})]})]})]})})]})})]})};export{R as default};
