const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PageTransition-jkWoiJCM.js","assets/vendor_react-haPYDNah.js","assets/vendor-Bpvzf4S2.js","assets/vendor_framer-motion-gyM7lMpO.js","assets/Home-B1h5zTp7.js","assets/admin-D6GwwKla.js","assets/product-detail-CKj_RcPP.js","assets/Products-DGvzgRXB.js","assets/BattleGear-C9_zvPMp.js","assets/Capsules-DeC6pwIy.js","assets/Training-ChGUDMTc.js","assets/Cart-CeL7L1gA.js","assets/AuthPage-Cp0xPMB9.js","assets/AuthPage-7Eylr524.css","assets/Wishlist-CIa4d2wv.js","assets/Checkout-BCCZahz_.js","assets/Contact-DTwsQTUs.js","assets/About-D61HQfNV.js","assets/Profile-BCnwsYu3.js","assets/OrderHistory-CiZMKMD-.js","assets/AddressBook-Wq6l3uir.js","assets/ChangePassword-C6BJtYho.js","assets/OrderTracking-DDM4wYzP.js","assets/OrderConfirmation-C3msde-4.js","assets/ShippingInfo-Dx5xxiEG.js","assets/NotFound-B6ERMZtr.js"])))=>i.map(i=>d[i]);
import{r as t,R as ne,j as e,B as oe,C as le,D as u,E as ie,G as ce,N as M,H as de,I as me,J as xe,K as $,M as ue,o as he,O as H,d as L,u as pe,L as h,P as B,Q as G,S as A,v as W,h as ge,T as fe,U as je,V as be,W as ye,X as ve,Y as we,Z as Ne,_ as Ce,$ as Ee}from"./vendor_react-haPYDNah.js";import{a7 as _e,a8 as Re,a9 as Se,aa as Te,P as S,ab as x}from"./vendor-Bpvzf4S2.js";import{a as q,u as Q,c as E,g as k,d as J,b as Ae,N as ke,C as Le,A as Pe}from"./admin-D6GwwKla.js";import{u as Oe,a as Ie,C as De,W as Fe}from"./product-detail-CKj_RcPP.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();const Ve=new _e({defaultOptions:{queries:{staleTime:1e3*60*5,cacheTime:1e3*60*10,retry:1,refetchOnWindowFocus:!0,refetchOnReconnect:!0},mutations:{retry:0}}}),ze=()=>{const[s,r]=t.useState(!1),{setUser:a}=q(),{showSuccess:l,showError:n}=Q();return{signInWithGoogle:async(i=!1)=>{r(!0);try{if(!E||!k)throw new Error("Firebase auth not configured.");let d;if(i){await Se(E,k);return}else d=await Te(E,k);if(d?.user){const b={uid:d.user.uid,email:d.user.email,displayName:d.user.displayName,photoURL:d.user.photoURL,emailVerified:d.user.emailVerified,provider:"google"};return a(b),l(`🚀 Welcome to Capsule Corp, ${d.user.displayName||"Saiyan"}!`,{title:"GOOGLE SIGN-IN SUCCESSFUL",duration:4e3}),b}}catch(d){console.error("Google sign-in error:",d);let b="Google sign-in failed";throw d.code==="auth/popup-closed-by-user"?b="Sign-in cancelled by user":d.code==="auth/popup-blocked"?b="Popup blocked. Please allow popups and try again.":d.code==="auth/cancelled-popup-request"?b="Another sign-in popup is already open":d.code==="auth/network-request-failed"&&(b="Network error. Please check your connection."),n(`⚡ ${b}`,{title:"GOOGLE SIGN-IN FAILED",duration:5e3}),new Error(b)}finally{r(!1)}},handleRedirectResult:async()=>{try{if(!E)return console.warn("Firebase auth not configured; skipping redirect result handling."),null;const i=await Re(E);if(i?.user){const d={uid:i.user.uid,email:i.user.email,displayName:i.user.displayName,photoURL:i.user.photoURL,emailVerified:i.user.emailVerified,provider:"google"};return a(d),l(`🚀 Welcome back, ${i.user.displayName||"Saiyan"}!`,{title:"GOOGLE SIGN-IN SUCCESSFUL",duration:4e3}),d}}catch(i){console.error("Redirect result error:",i)}},loading:s}},Me=(s,r)=>{const[a,l]=t.useState(()=>{try{const o=window.localStorage.getItem(s);return o?JSON.parse(o):r}catch(o){return console.error(`Error reading localStorage key "${s}":`,o),r}}),n=t.useCallback(o=>{try{const c=o instanceof Function?o(a):o;l(c),window.localStorage.setItem(s,JSON.stringify(c))}catch(c){console.error(`Error setting localStorage key "${s}":`,c)}},[s,a]);return[a,n]},Be=s=>{t.useEffect(()=>{const r=performance.now();return()=>{const l=performance.now()-r;l>100&&console.warn(`Slow render detected in ${s}: ${l.toFixed(2)}ms`)}})};class Ge extends ne.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,a){this.setState({error:r,errorInfo:a}),console.error("Error caught by boundary:",r,a)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-orange-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-2xl p-8 text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 font-saiyan mb-2",children:"SYSTEM ERROR!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Something went wrong with the Capsule Corp systems. Our engineers are on it!"})]}),!1,e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-6 rounded-lg transition-colors font-saiyan",children:"RELOAD SYSTEM"}),e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-colors font-saiyan",children:"RETURN HOME"})]})]})}):this.props.children}}const K=({size:s="medium",color:r="orange",text:a="Loading...",fullScreen:l=!1})=>{const n={small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12",xl:"w-16 h-16"},o={orange:"border-orange-500",blue:"border-blue-500",white:"border-white",gray:"border-gray-500"},c=`
    ${n[s]} 
    ${o[r]} 
    border-4 border-t-transparent 
    rounded-full animate-spin
  `,i=l?"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50":"flex items-center justify-center py-8";return e.jsx("div",{className:i,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:c}),a&&e.jsx("p",{className:"text-gray-600 font-saiyan text-sm animate-pulse",children:a})]})})};K.propTypes={size:S.oneOf(["small","medium","large","xl"]),color:S.oneOf(["orange","blue","white","gray"]),text:S.string,fullScreen:S.bool};const We=t.lazy(()=>x(()=>import("./PageTransition-jkWoiJCM.js"),__vite__mapDeps([0,1,2,3]))),Ue=t.lazy(()=>x(()=>import("./Home-B1h5zTp7.js"),__vite__mapDeps([4,1,2,5,6]))),$e=t.lazy(()=>x(()=>import("./Products-DGvzgRXB.js"),__vite__mapDeps([7,1,2,6,5]))),He=t.lazy(()=>x(()=>import("./product-detail-CKj_RcPP.js").then(s=>s.b),__vite__mapDeps([6,1,2,5]))),qe=t.lazy(()=>x(()=>import("./BattleGear-C9_zvPMp.js"),__vite__mapDeps([8,1,2,5,6]))),Qe=t.lazy(()=>x(()=>import("./Capsules-DeC6pwIy.js"),__vite__mapDeps([9,1,2,5,6]))),Je=t.lazy(()=>x(()=>import("./Training-ChGUDMTc.js"),__vite__mapDeps([10,1,2,5,6]))),Ke=t.lazy(()=>x(()=>import("./Cart-CeL7L1gA.js"),__vite__mapDeps([11,1,2,6,5]))),Ye=t.lazy(()=>x(()=>import("./AuthPage-Cp0xPMB9.js"),__vite__mapDeps([12,1,2,5,6,13]))),Xe=t.lazy(()=>x(()=>import("./Wishlist-CIa4d2wv.js"),__vite__mapDeps([14,1,2,5,6]))),Ze=t.lazy(()=>x(()=>import("./Checkout-BCCZahz_.js"),__vite__mapDeps([15,1,2,6,5]))),es=t.lazy(()=>x(()=>import("./Contact-DTwsQTUs.js"),__vite__mapDeps([16,1,2,5,6]))),ss=t.lazy(()=>x(()=>import("./About-D61HQfNV.js"),__vite__mapDeps([17,1,2,5,6]))),ts=t.lazy(()=>x(()=>import("./Profile-BCnwsYu3.js"),__vite__mapDeps([18,1,2,5,6]))),rs=t.lazy(()=>x(()=>import("./OrderHistory-CiZMKMD-.js"),__vite__mapDeps([19,1,2,5,6]))),as=t.lazy(()=>x(()=>import("./AddressBook-Wq6l3uir.js"),__vite__mapDeps([20,1,2,5]))),ns=t.lazy(()=>x(()=>import("./ChangePassword-C6BJtYho.js"),__vite__mapDeps([21,1,2,5]))),os=t.lazy(()=>x(()=>import("./OrderTracking-DDM4wYzP.js"),__vite__mapDeps([22,1,2,5]))),ls=t.lazy(()=>x(()=>import("./OrderConfirmation-C3msde-4.js"),__vite__mapDeps([23,1,2,5]))),is=t.lazy(()=>x(()=>import("./ShippingInfo-Dx5xxiEG.js"),__vite__mapDeps([24,1,2]))),cs=t.lazy(()=>x(()=>import("./admin-D6GwwKla.js").then(s=>s.e),__vite__mapDeps([5,1,2]))),ds=t.lazy(()=>x(()=>import("./admin-D6GwwKla.js").then(s=>s.f),__vite__mapDeps([5,1,2]))),ms=t.lazy(()=>x(()=>import("./admin-D6GwwKla.js").then(s=>s.h),__vite__mapDeps([5,1,2]))),xs=t.lazy(()=>x(()=>import("./admin-D6GwwKla.js").then(s=>s.i),__vite__mapDeps([5,1,2]))),us=t.lazy(()=>x(()=>import("./NotFound-B6ERMZtr.js"),__vite__mapDeps([25,1,2]))),hs=()=>{const s=oe(),r=e.jsx(K,{size:"large",text:"Powering up Capsule Corp systems...",fullScreen:!0});return e.jsx("div",{className:"w-full min-h-screen",children:e.jsx(t.Suspense,{fallback:r,children:e.jsx(We,{children:e.jsxs(le,{location:s,children:[e.jsx(u,{path:"/",element:e.jsx(Ue,{})}),e.jsx(u,{path:"/products",element:e.jsx($e,{})}),e.jsx(u,{path:"/product/:slug",element:e.jsx(He,{})}),e.jsx(u,{path:"/battle-gear",element:e.jsx(qe,{})}),e.jsx(u,{path:"/capsules",element:e.jsx(Qe,{})}),e.jsx(u,{path:"/training",element:e.jsx(Je,{})}),e.jsx(u,{path:"/cart",element:e.jsx(Ke,{})}),e.jsx(u,{path:"/checkout",element:e.jsx(Ze,{})}),e.jsx(u,{path:"/wishlist",element:e.jsx(Xe,{})}),e.jsx(u,{path:"/contact",element:e.jsx(es,{})}),e.jsx(u,{path:"/about",element:e.jsx(ss,{})}),e.jsx(u,{path:"/auth",element:e.jsx(Ye,{})}),e.jsx(u,{path:"/profile",element:e.jsx(ts,{})}),e.jsx(u,{path:"/order-history",element:e.jsx(rs,{})}),e.jsx(u,{path:"/address-book",element:e.jsx(as,{})}),e.jsx(u,{path:"/change-password",element:e.jsx(ns,{})}),e.jsx(u,{path:"/track-order",element:e.jsx(os,{})}),e.jsx(u,{path:"/order-confirmation",element:e.jsx(ls,{})}),e.jsx(u,{path:"/shipping-info",element:e.jsx(is,{})}),e.jsx(u,{path:"/admin",element:e.jsx(cs,{})}),e.jsx(u,{path:"/admin/products",element:e.jsx(ds,{})}),e.jsx(u,{path:"/admin/orders",element:e.jsx(ms,{})}),e.jsx(u,{path:"/admin/users",element:e.jsx(xs,{})}),e.jsx(u,{path:"*",element:e.jsx(us,{})})]})},s.pathname)})})},Y=t.createContext();function ps({children:s}){const[r,a]=t.useState(()=>{const n=localStorage.getItem("capsule-theme");return n?JSON.parse(n):!1});t.useEffect(()=>{localStorage.setItem("capsule-theme",JSON.stringify(r)),r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]);const l=()=>{a(n=>!n)};return e.jsx(Y.Provider,{value:{isDarkMode:r,toggleDarkMode:l},children:s})}function gs(){const s=t.useContext(Y);if(!s)throw new Error("useTheme must be used within ThemeProvider");return s}const fs=({showLabel:s=!0,size:r="medium"})=>{const{currency:a,currencyInfo:l,changeCurrency:n,getAvailableCurrencies:o,getAllCurrencies:c}=J(),[i,d]=t.useState(!1),[b,N]=t.useState(!1),g=o(),m=c(),f=m.filter(p=>!p.available),v=p=>{m.find(P=>P.code===p)?.available?(n(p),d(!1)):N(!0)};return e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>d(!i),className:"rounded-lg transition-all duration-150 flex items-center justify-center text-lg leading-none p-2 bg-white border-2 border-gray-200 shadow-sm","aria-label":`Currency: ${l.code}`,title:`${l.code} - ${l.name}`,children:e.jsx("span",{className:"text-2xl",children:l.flag})}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),e.jsxs("div",{className:"popover-panel popover-no-clip absolute right-0 mt-2 w-80 max-w-[95%] bg-white rounded-lg shadow-2xl border-2 border-gray-200 z-50",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-blue-500 text-white p-4",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(ie,{}),"Select Your Currency & Region"]}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:"Prices will be converted automatically"})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase px-3 py-2",children:"Available Regions"}),g.map(p=>e.jsx("button",{onClick:()=>v(p.code),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-orange-50 transition-colors ${a===p.code?"bg-orange-100 border-2 border-orange-500":"border-2 border-transparent"}`,children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx("div",{className:"flex-none",children:e.jsx("span",{className:"text-3xl",children:p.flag})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("p",{className:"font-semibold text-gray-800",children:[p.symbol," ",p.code]}),e.jsx("p",{className:"text-xs text-gray-500",children:p.country})]}),a===p.code&&e.jsx(ce,{className:"text-orange-500 text-lg"})]})},p.code)),f.length>0&&e.jsxs("div",{className:"border-t-2 border-gray-200 mt-2 pt-2 bg-gray-50 -mx-2 px-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase px-3 py-2",children:"⚠️ Temporarily Unavailable"}),f.map(p=>e.jsx("button",{onClick:()=>{N(!0),d(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-red-50 transition-colors opacity-60 cursor-not-allowed",disabled:!0,children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx("div",{className:"flex-none",children:e.jsx("span",{className:"text-3xl grayscale",children:p.flag})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("p",{className:"font-semibold text-gray-600",children:[p.symbol," ",p.code]}),e.jsx("p",{className:"text-xs text-red-500",children:"Coming Soon!"})]})]})},p.code))]})]}),e.jsx("div",{className:"bg-gray-100 p-3 border-t-2 border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"💡 Exchange rates updated daily"})})]})]}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full overflow-hidden animate-bounce-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white p-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-3",children:"⚠️"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Region Temporarily Unavailable!"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"font-bold text-yellow-800 mb-2",children:"🐉 Dragon Ball Alert!"}),e.jsx("p",{className:"text-sm text-yellow-700",children:f[0]?.restriction||"This region is currently experiencing intense battles. Instant Transmission unavailable!"})]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsx("p",{children:e.jsx("strong",{children:"Why can't I shop from this region?"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Goku's Instant Transmission has a cooldown period"}),e.jsx("li",{children:"The Hyperbolic Time Chamber is under maintenance"}),e.jsx("li",{children:"We're upgrading our Dragon Radar network"}),e.jsx("li",{children:"Payment processing requires Senzu Bean verification"})]}),e.jsx("p",{className:"mt-4 font-semibold text-orange-600",children:"✨ Good news: We're working on expanding to your region soon!"})]})]}),e.jsxs("div",{className:"bg-gray-100 p-4 flex gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"flex-1 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-semibold",children:"Got It!"}),e.jsx("button",{onClick:()=>{N(!1),d(!0)},className:"flex-1 px-4 py-2 bg-white border-2 border-gray-300 text-gray-700 rounded-lg hover:border-orange-500 hover:text-orange-500 transition-colors font-semibold",children:"Choose Available Region"})]})]})})]})},U=[{name:"Home",to:"/",icon:e.jsx(de,{})},{name:"Products",to:"/products",icon:e.jsx(me,{})},{name:"Battle Gear",to:"/battle-gear",icon:e.jsx(xe,{})},{name:"Capsules",to:"/capsules",icon:e.jsx($,{})},{name:"Training",to:"/training",icon:e.jsx(ue,{})},{name:"Track Order",to:"/track-order",icon:e.jsx(he,{})},{name:"Contact",to:"/contact",icon:e.jsx(H,{})},{name:"Cart",to:"/cart",icon:e.jsx(L,{})}];function X(){const[s,r]=t.useState(!1);return e.jsxs("nav",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b-2 border-[#3B4CCA]/20 shadow-sm w-full",children:[e.jsx("div",{className:"xs:hidden flex items-center justify-between px-4 py-2",children:e.jsxs("button",{className:"p-2 text-[#3B4CCA]","aria-label":"Toggle navigation",onClick:()=>r(!s),children:[e.jsx("span",{className:"sr-only",children:"Menu"}),e.jsx("svg",{width:"28",height:"28",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M3 6h14M3 10h14M3 14h14"})})]})}),s&&e.jsx("div",{className:"xs:hidden flex flex-col gap-2 px-4 py-2 bg-white border-t border-[#3B4CCA]/10 shadow-lg animate-slide-down",children:U.map(a=>e.jsxs(M,{to:a.to,className:({isActive:l})=>`flex items-center gap-3 px-3 py-2 rounded-lg font-medium transition-colors hover:bg-blue-50 text-[#3B4CCA] text-base ${l?"bg-blue-100 font-bold":""}`,onClick:()=>r(!1),children:[e.jsx("span",{className:"text-xl",children:a.icon}),e.jsx("span",{children:a.name})]},a.name))}),e.jsx("div",{className:"hidden xs:flex items-center space-x-4 sm:space-x-8 py-4 px-4",children:U.map(a=>e.jsxs(M,{to:a.to,className:({isActive:l})=>`flex items-center gap-2 font-medium transition-colors border-b-2 border-transparent hover:text-[#3B4CCA] hover:border-[#3B4CCA] cursor-pointer whitespace-nowrap shrink-0 text-sm sm:text-base ${l?"text-[#3B4CCA] border-[#3B4CCA] font-bold":""}`,children:[e.jsx("span",{className:"text-lg",children:a.icon}),e.jsx("span",{children:a.name})]},a.name))})]})}function js(){const[s,r]=t.useState(""),[a,l]=t.useState([]),[n,o]=t.useState(!1),[c,i]=t.useState(!1),{user:d,logout:b}=q(),{showSuccess:N}=Q(),{cartItems:g,updateQuantity:m,removeFromCart:f,getCartCount:v,getCartTotal:p}=Oe(),{wishlistItems:Z,removeFromWishlist:P,getWishlistCount:ee}=Ie(),{isDarkMode:O,toggleDarkMode:I}=gs(),{formatPrice:Cs}=J(),se=pe(),T=t.useRef(null);t.useRef(null),t.useRef(null);const _=v(),D=ee();t.useEffect(()=>{if(s.trim()&&s.trim().length>=2){const y=setTimeout(async()=>{try{const w=await Ae(`/api/products?search=${encodeURIComponent(s.trim())}&limit=5`);l(w.products||[]),o(!0)}catch(w){console.error("Search error:",w),l([]),o(!1)}},600);return()=>clearTimeout(y)}else l([]),o(!1)},[s]),t.useEffect(()=>{const j=y=>{T.current&&!T.current.contains(y.target)&&o(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const te=j=>{j.preventDefault(),s.trim()&&(se(`/products?search=${encodeURIComponent(s)}`),o(!1),r(""),c&&i(!1))},C=t.useRef(null),R=t.useRef(null),[re,F]=t.useState("");t.useEffect(()=>{const j=y=>{if(c&&(y.key==="Escape"&&i(!1),y.key==="Tab")){const w=C.current?C.current.querySelectorAll('a,button,input,select,textarea,[tabindex]:not([tabindex="-1"])'):[];if(w.length===0)return;const V=w[0],z=w[w.length-1];y.shiftKey?document.activeElement===V&&(y.preventDefault(),z.focus()):document.activeElement===z&&(y.preventDefault(),V.focus())}};return c?(document.body.style.overflow="hidden",R.current=document.activeElement,setTimeout(()=>{const y=C.current?C.current.querySelectorAll('a,button,input,select,textarea,[tabindex]:not([tabindex="-1"])'):[];y.length&&y[0].focus()},50),document.addEventListener("keydown",j)):(document.body.style.overflow="",R.current&&R.current.focus&&R.current.focus(),document.removeEventListener("keydown",j)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",j)}},[c]),t.useEffect(()=>{F(c?"Menu opened":"Menu closed")},[c]);const ae=[{name:"Home",to:"/"},{name:"Products",to:"/products"},{name:"Battle Gear",to:"/battle-gear"},{name:"Capsules",to:"/capsules"},{name:"Training",to:"/training"},{name:"Track Order",to:"/track-order"},{name:"Contact",to:"/contact"},{name:"Cart",to:"/cart"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only","data-testid":"menu-live",children:re}),e.jsx("header",{className:"hidden md:block bg-white shadow-sm",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsx(h,{to:"/",className:"flex items-center gap-3",children:e.jsx("img",{src:"/images/CAPSULE CORP IMG.svg",alt:"Capsule Corp",className:"w-12 h-12 object-contain"})}),e.jsx("div",{className:"flex-1 mx-6",children:e.jsx(X,{})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:I,"aria-label":"Toggle theme",className:"p-2",children:O?e.jsx(B,{}):e.jsx(G,{})}),d?e.jsxs(h,{to:"/profile",className:"p-2 flex items-center gap-2",children:[e.jsx(A,{})," ",e.jsx("span",{className:"hidden sm:inline",children:"Profile"})]}):e.jsxs(h,{to:"/auth",className:"p-2 flex items-center gap-2",children:[e.jsx(A,{})," ",e.jsx("span",{className:"hidden sm:inline",children:"Login"})]}),e.jsxs(h,{to:"/wishlist",className:"relative p-2",children:[e.jsx(W,{}),D>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:D})]}),e.jsxs(h,{to:"/cart",className:"relative p-2",children:[e.jsx(L,{}),_>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-[#FF9E00] text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:_})]})]})]})}),e.jsxs("header",{className:"block md:hidden bg-white shadow-md",children:[e.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[e.jsx(h,{to:"/",className:"flex items-center",children:e.jsx("img",{src:"/images/CAPSULE CORP IMG.svg",alt:"Capsule Corp",className:"w-10 h-10 object-contain"})}),e.jsx("div",{className:"flex-1 px-3",ref:T,children:e.jsx("form",{onSubmit:te,className:"w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:s,onChange:j=>r(j.target.value),type:"search",placeholder:"Search products...","aria-label":"Search products",className:"w-full px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none"}),e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-600",children:e.jsx(ge,{})})]})})}),e.jsx("button",{"aria-label":c?"Close menu":"Open menu","aria-expanded":c,onClick:()=>i(!c),className:"p-2 relative w-10 h-10 flex items-center justify-center",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[e.jsx("rect",{className:`hamburger-line top ${c?"open":""}`,x:"3",y:"5",width:"18",height:"2.2",rx:"1",fill:"currentColor"}),e.jsx("rect",{className:`hamburger-line middle ${c?"open":""}`,x:"3",y:"11",width:"18",height:"2.2",rx:"1",fill:"currentColor"}),e.jsx("rect",{className:`hamburger-line bottom ${c?"open":""}`,x:"3",y:"17",width:"18",height:"2.2",rx:"1",fill:"currentColor"})]})})]}),c&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-white overflow-auto mobile-menu-overlay","aria-modal":"true",role:"dialog",children:[e.jsxs("div",{className:"px-4 pt-6 pb-36",ref:C,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{to:"/",onClick:()=>i(!1),children:e.jsx("img",{src:"/images/CAPSULE CORP IMG.svg",alt:"Capsule Corp",className:"w-12 h-12 object-contain"})}),e.jsx("button",{onClick:()=>i(!1),className:"p-2","aria-label":"Close menu",children:e.jsxs("svg",{className:"w-6 h-6 text-[#FFD700]",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M4 4L20 20",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round"}),e.jsx("path",{d:"M20 4L4 20",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round"})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsx("ul",{className:"flex flex-col gap-3",children:ae.map(j=>e.jsxs("li",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"hover-translate",children:e.jsxs(h,{to:j.to,onClick:()=>i(!1),className:"block px-4 py-5 text-lg text-[#111827] font-semibold bg-gradient-to-r from-white to-gray-50 rounded-lg shadow-sm border-l-4 border-transparent hover:border-l-4 hover:border-[#3B4CCA] transition-all",children:[e.jsx("span",{className:"uppercase text-sm text-gray-500 block mb-1",children:"Category"}),e.jsx("span",{className:"text-xl",children:j.name})]})}),e.jsx("span",{className:"absolute left-0 top-0 h-full w-1 bg-gradient-to-b from-[#3B4CCA] to-transparent opacity-30"})]},j.to))})})]}),e.jsx("div",{className:"fixed left-0 right-0 bottom-0 bg-white border-t border-gray-200 px-4 py-2 z-50 mobile-bottom-bar",children:e.jsxs("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(h,{to:"/profile",className:"flex items-center gap-2 text-sm",onClick:()=>i(!1),children:e.jsx(A,{className:"text-xl"})}),!d&&e.jsx(h,{to:"/auth",className:"text-sm font-medium",onClick:()=>i(!1),children:"Login"}),e.jsx(h,{to:"/register",className:"text-sm font-medium",onClick:()=>i(!1),children:"Register"})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-gray-100 rounded-full px-3 py-1",children:[e.jsx("button",{onClick:I,className:"p-1 text-sm","aria-label":"Toggle theme",children:O?e.jsx(B,{className:"text-base"}):e.jsx(G,{className:"text-base"})}),e.jsx("div",{className:"w-28",children:e.jsx(fs,{size:"small",showLabel:!1})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(h,{to:"/cart",className:"relative p-1",onClick:()=>i(!1),children:[e.jsx(L,{className:"text-xl"}),_>0&&e.jsx("span",{className:"absolute -top-1 -right-2 bg-[#FF9E00] text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:_})]}),e.jsx(h,{to:"/wishlist",className:"p-1",onClick:()=>i(!1),children:e.jsx(W,{className:"text-xl"})})]})]})})]})]})]})}function bs(){return e.jsx("footer",{className:"bg-neutral-900 text-white py-12 mt-16 overflow-x-hidden p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center",children:e.jsx($,{className:"text-neutral-900"})}),e.jsx("h5",{className:"font-saiyan text-lg tracking-wide",children:"CAPSULE CORP"})]}),e.jsx("p",{className:"text-neutral-400 text-sm mb-4",children:"Founded by Dr. Brief, Capsule Corp has been Earth's leading technology company since Age 712."}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"text-neutral-500 text-xs"}),e.jsx("span",{className:"text-neutral-400",children:"Cupertino, CA"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(je,{className:"text-neutral-500 text-xs"}),e.jsx("span",{className:"text-neutral-400",children:"+1 (555) CAPSULE"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"text-neutral-500 text-xs"}),e.jsx("span",{className:"text-neutral-400",children:"capsulecorp.8999@gmail.com"})]})]})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-4 font-bold",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2 text-sm text-neutral-400",children:[e.jsx("li",{children:e.jsx(h,{to:"/",className:"hover:text-white transition-colors",children:"Home"})}),e.jsx("li",{children:e.jsx(h,{to:"/battle-gear",className:"hover:text-white transition-colors",children:"Battle Gear"})}),e.jsx("li",{children:e.jsx(h,{to:"/products",className:"hover:text-white transition-colors",children:"Products"})}),e.jsx("li",{children:e.jsx(h,{to:"/training",className:"hover:text-white transition-colors",children:"Training"})}),e.jsx("li",{children:e.jsx(h,{to:"/contact",className:"hover:text-white transition-colors",children:"Contact Us"})})]})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-4 font-bold",children:"Categories"}),e.jsxs("ul",{className:"space-y-2 text-sm text-neutral-400",children:[e.jsx("li",{children:e.jsx(h,{to:"/battle-gear",className:"hover:text-white transition-colors",children:"Battle Armor"})}),e.jsx("li",{children:e.jsx(h,{to:"/training",className:"hover:text-white transition-colors",children:"Training Equipment"})}),e.jsx("li",{children:e.jsx(h,{to:"/capsules",className:"hover:text-white transition-colors",children:"Capsule Technology"})}),e.jsx("li",{children:e.jsx(h,{to:"/products",className:"hover:text-white transition-colors",children:"Accessories"})}),e.jsx("li",{children:e.jsx(h,{to:"/about",className:"hover:text-white transition-colors",children:"About Us"})})]})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-4 font-bold",children:"Connect"}),e.jsxs("div",{className:"flex space-x-4 mb-4",children:[e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",children:e.jsx(be,{className:"text-xl hover:text-neutral-300 transition-colors"})}),e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",children:e.jsx(ye,{className:"text-xl hover:text-neutral-300 transition-colors"})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",children:e.jsx(ve,{className:"text-xl hover:text-neutral-300 transition-colors"})})]}),e.jsx("p",{className:"text-neutral-400 text-sm mb-4",children:"Follow us for updates from Earth's greatest scientists!"}),e.jsxs("div",{className:"text-xs text-neutral-500",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Silicon Valley HQ:"}),e.jsx("p",{children:"Capsule Corporation Tower"}),e.jsx("p",{children:"10600 N De Anza Blvd"}),e.jsx("p",{children:"Cupertino, CA 95014"})]})]})]}),e.jsxs("div",{className:"border-t border-neutral-800 mt-8 pt-8 text-center relative",children:[e.jsx("p",{className:"text-neutral-400 text-sm",children:"© Age 762 Capsule Corporation. All rights reserved. No Saiyans were harmed in the making of this website."}),e.jsx("div",{className:"absolute inset-0 border-2 border-dashed border-neutral-700 opacity-30 pointer-events-none"})]})]})})}function ys(){const{handleRedirectResult:s}=ze();return Be("App"),t.useEffect(()=>{s()},[s]),e.jsx(Ge,{children:e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(js,{}),e.jsx(X,{}),e.jsx("main",{className:"flex-1",children:e.jsx(hs,{})}),e.jsx(bs,{})]})})}const vs=t.createContext(),ws=(s,r)=>{switch(r.type){case"SET_REVIEWS":return{...s,reviews:r.payload,loading:!1};case"ADD_REVIEW":return{...s,reviews:[r.payload,...s.reviews],totalReviews:s.totalReviews+1};case"UPDATE_REVIEW":return{...s,reviews:s.reviews.map(a=>a.id===r.payload.id?r.payload:a)};case"DELETE_REVIEW":return{...s,reviews:s.reviews.filter(a=>a.id!==r.payload),totalReviews:s.totalReviews-1};case"SET_LOADING":return{...s,loading:r.payload};case"SET_ERROR":return{...s,error:r.payload,loading:!1};default:return s}},Ns=({children:s})=>{const[r,a]=Me("reviewCache",{}),[l,n]=t.useReducer(ws,{reviews:[],totalReviews:0,loading:!1,error:null}),N={...l,fetchReviews:async g=>{if(r[g]){n({type:"SET_REVIEWS",payload:r[g]});return}n({type:"SET_LOADING",payload:!0});try{const m=[{id:1,productId:g,userId:1,userName:"Goku",rating:5,title:"Amazing power level boost!",comment:"This training gear helped me reach new heights! Highly recommend for any Saiyan.",date:"2024-01-15",verified:!0,helpful:12},{id:2,productId:g,userId:2,userName:"Vegeta",rating:4,title:"Worthy of a Prince",comment:"Quality is acceptable for royal training. Could use more style.",date:"2024-01-10",verified:!0,helpful:8}],f={...r,[g]:m};a(f),n({type:"SET_REVIEWS",payload:m})}catch(m){n({type:"SET_ERROR",payload:m.message})}},addReview:async g=>{try{const m={id:Date.now(),...g,date:new Date().toISOString().split("T")[0],verified:!1,helpful:0};n({type:"ADD_REVIEW",payload:m});const f=r[g.productId]||[],v={...r,[g.productId]:[m,...f]};return a(v),m}catch(m){throw n({type:"SET_ERROR",payload:m.message}),m}},markHelpful:async g=>{try{const m=l.reviews.map(f=>f.id===g?{...f,helpful:f.helpful+1}:f);n({type:"SET_REVIEWS",payload:m})}catch(m){n({type:"SET_ERROR",payload:m.message})}},getAverageRating:g=>{const m=r[g]||[];return m.length===0?0:(m.reduce((v,p)=>v+p.rating,0)/m.length).toFixed(1)},getRatingDistribution:g=>{const m=r[g]||[],f={1:0,2:0,3:0,4:0,5:0};return m.forEach(v=>{f[v.rating]++}),f}};return e.jsx(vs.Provider,{value:N,children:s})};we.createRoot(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsxs(Ne,{client:Ve,children:[e.jsx(Ce,{children:e.jsx(ps,{children:e.jsx(ke,{children:e.jsx(Le,{children:e.jsx(Pe,{children:e.jsx(Ns,{children:e.jsx(De,{children:e.jsx(Fe,{children:e.jsx(ys,{})})})})})})})})}),e.jsx(Ee,{initialIsOpen:!1})]})}));export{ze as a,gs as u};
