import{aQ as P,r as j,j as s,X as w,l as _,m as C,n as O,L as R,Z as E,p as F,a6 as W,t as L,P as y,g as D}from"./index-C_rhaFlX.js";var h={exports:{}},g,N;function I(){if(N)return g;N=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return g=n,g}var x,T;function A(){if(T)return x;T=1;var n=I();function e(){}function r(){}return r.resetWarningCache=e,x=function(){function a(l,c,f,v,u,p){if(p!==n){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}a.isRequired=a;function t(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:t,element:a,elementType:a,instanceOf:t,node:a,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},x}var S;function $(){return S||(S=1,h.exports=A()()),h.exports}var q=$();const d=P(q);function k({src:n,alt:e,className:r="",overlayText:a=""}){const[t,i]=j.useState(!1);return j.useEffect(()=>{if(!n){i(!1);return}i(!1);const l=new Image;return l.src=n,l.onload=()=>i(!0),l.onerror=()=>i(!1),()=>{l.onload=null,l.onerror=null}},[n]),s.jsxs("div",{className:`${r} bg-center bg-cover rounded-2xl overflow-hidden relative`,"aria-label":e,children:[n?s.jsx("img",{src:n,alt:e,className:"w-full h-full object-contain",loading:"lazy",onLoad:()=>i(!0),onError:()=>i(!1),style:{display:t?"block":"none"}}):null,!t&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#3B4CCA] to-blue-600 items-center justify-center z-40 flex",children:s.jsx("span",{className:"text-white font-bold font-saiyan text-center text-2xl px-4",children:a})})]})}k.propTypes={src:d.string,alt:d.string,className:d.string,overlayText:d.string};const U=w.memo(function({product:e,size:r="medium"}){const{user:a}=_(),{addToCart:t}=C(),{addToWishlist:i,removeFromWishlist:l,isInWishlist:c}=O(),f=o=>{o.preventDefault(),o.stopPropagation(),(e.stock>0||e.inStock||e.in_stock)&&t(e)},v=o=>{o.preventDefault(),o.stopPropagation(),c(e.id)?l(e.id):i(e)},u={small:"product-image-small",medium:"product-image-medium",large:"product-image-large"},p={small:"product-name product-name-small",medium:"product-name product-name-medium",large:"product-name product-name-large"},m={small:"current-price current-price-small",medium:"current-price current-price-medium",large:"current-price current-price-large"};return s.jsxs("div",{className:"product-card",children:[s.jsx(R,{to:`/product/${e.slug}`,className:"product-card-link",children:s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:`product-image-container ${u[r]}`,children:[s.jsx(k,{src:E(e,r==="small"?80:300),alt:e.name,className:`w-full ${u[r]}`,overlayText:e.name}),(e.stock<=0||!e.inStock&&!e.in_stock)&&s.jsx("div",{className:"status-badge status-badge-out-of-stock",children:"OUT OF STOCK"}),(e.featured||e.is_featured)&&s.jsx("div",{className:"status-badge status-badge-featured kamehameha-glow",children:"LEGENDARY"}),s.jsx("button",{onClick:v,className:`wishlist-button ${e.featured||e.is_featured?"wishlist-button-featured":""} ${c(e.id)?"wishlist-button-active":"wishlist-button-inactive"} ${a?"":"wishlist-button-disabled"}`,"aria-label":c(e.id)?"Remove from wishlist":"Add to wishlist",children:s.jsx(F,{className:"text-sm"})}),s.jsx("div",{className:"quick-view-overlay",children:s.jsxs("div",{className:"quick-view-button",children:[s.jsx(W,{}),s.jsx("span",{children:"VIEW DETAILS"})]})})]}),s.jsxs("div",{className:"product-info",children:[s.jsx("div",{className:"mb-2",children:s.jsx("span",{className:"category-badge",children:e.category})}),s.jsx("h3",{className:`${p[r]} line-clamp-2`,children:e.name}),s.jsxs("div",{className:"power-level",children:[s.jsx(L,{className:"power-level-icon"}),s.jsxs("span",{className:"power-level-text",children:["Power Level: ",Number(e.powerLevel||e.power_level||0).toLocaleString()]})]}),e.tags&&e.tags.length>0&&s.jsx("div",{className:"product-tags",children:e.tags.slice(0,2).map((o,b)=>s.jsx("span",{className:"product-tag",children:o},b))}),s.jsx("div",{className:"price-section",children:s.jsxs("div",{className:"price-container",children:[(e.originalPrice||e.original_price)&&s.jsx("span",{className:"original-price",children:s.jsx(y,{value:e.originalPrice||e.original_price})}),s.jsx("span",{className:m[r],children:s.jsx(y,{value:e.price})})]})})]})]})}),s.jsx("div",{className:"action-button-container",children:s.jsxs("button",{onClick:f,disabled:!(e.inStock||e.in_stock||e.stock>0),className:`action-button touch-target ${e.inStock||e.in_stock||e.stock>0?"action-button-enabled":"action-button-disabled"}`,children:[s.jsx(D,{className:"action-button-icon"}),s.jsx("span",{className:"action-button-text-desktop",children:e.inStock||e.in_stock||e.stock>0?"ADD TO CAPSULE":"OUT OF STOCK"}),s.jsx("span",{className:"action-button-text-mobile",children:e.inStock||e.in_stock||e.stock>0?"ADD":"OUT"})]})})]})}),B=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"}));export{k as I,U as P,B as a};
